"use strict";(self["webpackChunkastar_portal"]=self["webpackChunkastar_portal"]||[]).push([[757],{2816:(t,e,a)=>{a.r(e),a.d(e,{default:()=>qo});var o=a(83673),n=a(62323);const s={class:"tw-mt-3 tw-mb-12"};function l(t,e,a,l,r,i){const d=(0,o.up)("icon-plus"),c=(0,o.up)("icon-base"),u=(0,o.up)("ContractsTable"),w=(0,o.up)("CodehashTable"),m=(0,o.up)("ModalCreateDapps"),p=(0,o.up)("ModalCodeHash");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",s,[(0,o._)("button",{type:"button",class:"create-dapp-button",onClick:e[0]||(e[0]=e=>t.modalCreateDapps=!0)},[(0,o.Wm)(c,{class:"tw-w-5 tw-h-5 tw-text-white tw--ml-1",stroke:"currentColor","icon-name":"plus"},{default:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:1}),(0,o.Uk)(" "+(0,n.zw)(t.$t("contracts.createYourDapp")),1)]),(0,o._)("button",{type:"button",class:"icon-plus-button",onClick:e[1]||(e[1]=e=>t.modalCodeHash=!0)},[(0,o.Wm)(c,{class:"plus","icon-name":"plus",viewBox:"0 0 24 24",stroke:"currentColor"},{default:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:1}),(0,o.Uk)(" "+(0,n.zw)(t.$t("contracts.addExistingCodeHash")),1)])]),(0,o.Wm)(u),(0,o.Wm)(w),t.modalCreateDapps?((0,o.wg)(),(0,o.j4)(m,{key:0,isOpen:t.modalCreateDapps,"onUpdate:isOpen":e[2]||(e[2]=e=>t.modalCreateDapps=e)},null,8,["isOpen"])):(0,o.kq)("",!0),t.modalCodeHash?((0,o.wg)(),(0,o.j4)(p,{key:1,isOpen:t.modalCodeHash,"onUpdate:isOpen":e[3]||(e[3]=e=>t.modalCodeHash=e),address:t.currentAccount},null,8,["isOpen","address"])):(0,o.kq)("",!0)])}var r=a(61959),i=a(80794),d=a(55502),c=a(55121),u=a(98880);const w={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-3 xl:tw-grid-cols-4 tw-gap-4"};function m(t,e,a,s,l,r){const i=(0,o.up)("CodeItem"),d=(0,o.up)("ModalConfirmRemoval");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.wy)((0,o._)("h2",{class:"tw-text-blue-900 dark:tw-text-white tw-text-lg tw-font-bold tw-mb-4 tw-leading-tight"},(0,n.zw)(t.$t("contracts.codeHashes")),513),[[u.F8,t.allCode.length>0]]),(0,o._)("div",w,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.allCode,((e,a)=>((0,o.wg)(),(0,o.j4)(i,{key:a,code:e,onConfirmRemoval:t.onConfirmRemoval},null,8,["code","onConfirmRemoval"])))),128))]),t.modalConfirmRemoval?((0,o.wg)(),(0,o.j4)(d,{key:0,isOpen:t.modalConfirmRemoval,"onUpdate:isOpen":e[0]||(e[0]=e=>t.modalConfirmRemoval=e),ctype:"codehash",onForget:t.onForget},null,8,["isOpen","onForget"])):(0,o.kq)("",!0)])}var p=a(92872),g=a(71141);const v={class:"tw-bg-white dark:tw-bg-darkGray-800 tw-shadow tw-rounded-lg tw-p-5"},y={class:"tw-text-blue-900 dark:tw-text-darkGray-100 tw-text-lg tw-font-bold tw-leading-tight tw-mb-3"},h={class:"tw-grid tw-grid-cols-1 tw-gap-2 tw-my-4"},f={class:"tw-text-xs tw-text-gray-500 dark:tw-text-darkGray-400"},b={class:"tw-flex tw-justify-between tw-items-center"},x={class:"tw-text-xs tw-text-blue-900 dark:tw-text-darkGray-100"},k={class:"tw-pointer-events-none tw-hidden tw-absolute tw-top-0 tw-left-1/2 tw-z-10 tw-transform tw--translate-y-full tw--translate-x-1/2 tw-p-2 tw-text-xs tw-leading-tight tw-text-white tw-bg-gray-800 dark:tw-bg-darkGray-500 tw-rounded-md tw-shadow-lg"},_=["value"],C={class:"tw-text-xs tw-text-gray-500 dark:tw-text-darkGray-400"},A={key:0,class:"tw-text-xs tw-text-blue-900 dark:tw-text-darkGray-100"},H={class:"tw-text-right"};function S(t,e,a,s,l,r){const i=(0,o.up)("icon-document-duplicate"),d=(0,o.up)("icon-base"),c=(0,o.up)("Message");return(0,o.wg)(),(0,o.iD)("div",v,[(0,o._)("p",y,(0,n.zw)(t.code.json.name),1),(0,o._)("div",h,[(0,o._)("div",null,[(0,o._)("div",f,(0,n.zw)(t.$t("contracts.codeHash")),1),(0,o._)("div",b,[(0,o._)("div",x,(0,n.zw)(t.shortenCodeHash),1),(0,o._)("button",{type:"button",class:"coppy-address-button tw-tooltip",onClick:e[0]||(e[0]=(...e)=>t.copyAddress&&t.copyAddress(...e))},[(0,o.Wm)(d,{class:"tw-h-5 tw-w-5 dark:tw-text-darkGray-100",viewBox:"0 0 20 20","aria-hidden":"true"},{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1}),(0,o._)("span",k,(0,n.zw)(t.$t("copy")),1)]),(0,o._)("input",{id:"hiddenCodehash",type:"hidden",value:t.code.json.codeHash},null,8,_)])]),(0,o._)("div",null,[(0,o._)("div",C,(0,n.zw)(t.$t("contracts.msgs")),1),t.messages?((0,o.wg)(),(0,o.iD)("div",A,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.messages,(t=>((0,o.wg)(),(0,o.j4)(c,{key:t.identifier,message:t},null,8,["message"])))),128))])):(0,o.kq)("",!0)])]),(0,o._)("div",H,[(0,o._)("button",{type:"button",class:"forget-button",onClick:e[1]||(e[1]=(...e)=>t.onForget&&t.onForget(...e))},(0,n.zw)(t.$t("forget")),1)])])}var I=a(18934);const M={class:"message"},j={class:"tw-tooltip tw-relative"},G={class:"tw-flex"},z={class:"tw-tooltip-shadow dark:tw-bg-darkGray-900 tw-hidden tw-absolute tw-z-10 tw-top-6 tw-left-5 tw-text-s dark:tw-text-white tw-bg-gray-800 tw-rounded-md"},D={class:"tw-flex tw-bg-gray-100 dark:tw-bg-darkGray-800 tw-px-2 tw-py-1 tw-rounded-t-md"},U={class:"tw-leading-7 tw-px-2 tw-py-2 tw-float-left tw-w-96 tw-bg-gray-200 dark:tw-bg-darkGray-900"};function $(t,e,a,s,l,r){const i=(0,o.up)("q-icon");return(0,o.wg)(),(0,o.iD)("div",M,[(0,o._)("div",j,[(0,o._)("div",G,[t.message.isConstructor?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(i,{key:0,name:t.icPlayArrow,class:"tw-mr-2",onClick:t.onCall},null,8,["name","onClick"])),(0,o._)("div",{class:(0,n.C_)(["tw-font-semibold",[t.message.isConstructor?"tw-text-blue-400":"tw-text-yellow-400"]])},(0,n.zw)(t.message.identifier),3),(0,o._)("div",null,(0,n.zw)(`(${t.argsString})${t.returnTypeString}`),1)]),(0,o._)("span",z,[(0,o._)("div",null,[(0,o._)("div",D,[(0,o._)("div",{class:(0,n.C_)(["tw-font-semibold",[t.message.isConstructor?"tw-text-blue-400":"tw-text-yellow-400"]])},(0,n.zw)(t.message.identifier),3),(0,o._)("div",null,(0,n.zw)(`(${t.argsString})${t.returnTypeString}`),1)]),(0,o._)("div",U,(0,n.zw)(t.docsString),1)])])])])}var O=a(99822);const F=(0,o.aZ)({props:{message:{required:!0,type:Object},messageIndex:{type:Number,default:0}},emits:["call-method"],setup(t,{emit:e}){let a=O.fPW,o=t.message.args.map((({name:t,type:e})=>`${t}: ${e.type}`)).join(", ");o.length||(o=" ");const n=t.message.docs.join("\n")||"No documentation provided",s=t.message.returnType?`: ${t.message.returnType.type}`:"",l=()=>{e("call-method",t.messageIndex)};return{argsString:o,docsString:n,returnTypeString:s,icPlayArrow:a,onCall:l}}});var R=a(74260),T=a(24554),P=a(7518),Z=a.n(P);const W=(0,R.Z)(F,[["render",$]]),q=W;Z()(F,"components",{QIcon:T.Z});const B=(0,o.aZ)({components:{IconBase:c.Z,IconDocumentDuplicate:I.Z,Message:q},props:{code:{type:Object,required:!0}},emits:["confirmRemoval"],setup(t,{emit:e}){const{code:a}=(0,r.BK)(t),o=(0,r.Fl)((()=>{const t=a.value.json.codeHash;return t?`${t.slice(0,6)}${".".repeat(6)}${t.slice(-6)}`:""})),n=(0,r.iH)(a.value.contractAbi),{messages:s}=(0,g.y_)(n),l=(0,p.useStore)(),i=()=>{e("confirmRemoval",a.value.json.codeHash)},d=()=>{l.dispatch("general/showAlertMsg",{msg:"Copy codeHash success!!",alertType:"success"})};return{shortenCodeHash:o,messages:s,showAlert:d,onForget:i}},methods:{copyAddress(){var t,e=document.querySelector("#hiddenCodehash");e.setAttribute("type","text"),e.select(),document.execCommand("copy"),e.setAttribute("type","hidden"),null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),this.showAlert()}}}),N=(0,R.Z)(B,[["render",S],["__scopeId","data-v-d60f66cc"]]),E=N,V=t=>((0,o.dD)("data-v-13e45303"),t=t(),(0,o.Cn)(),t),K={class:"tw-fixed tw-z-10 tw-inset-0 tw-overflow-y-auto"},Y={class:"tw-flex tw-items-center tw-justify-center tw-min-h-screen"},L=V((()=>(0,o._)("div",{class:"tw-fixed tw-inset-0 tw-transition-opacity","aria-hidden":"true"},[(0,o._)("div",{class:"tw-absolute tw-inset-0 tw-bg-gray-900 dark:tw-bg-black tw-opacity-75"})],-1))),J={class:"tw-inline-block tw-bg-white dark:tw-bg-darkGray-900 tw-rounded-lg tw-px-4 sm:tw-px-8 tw-py-10 tw-overflow-hidden tw-shadow-xl tw-transform tw-transition-all tw-mx-2 tw-my-2 tw-align-middle tw-max-w-lg tw-w-full"},Q={class:"tw-text-lg tw-font-extrabold tw-text-blue-900 dark:tw-text-white tw-mb-6 tw-text-center"},X={key:0},tt={key:1},et={class:"tw-grid tw-grid-cols-1 tw-gap-6 dark:tw-text-white"},at={key:0},ot=V((()=>(0,o._)("br",null,null,-1))),nt={key:1},st=V((()=>(0,o._)("br",null,null,-1))),lt={class:"tw-mt-6 tw-flex tw-justify-center tw-flex-row-reverse"};function rt(t,e,a,s,l,r){return(0,o.wg)(),(0,o.iD)("div",K,[(0,o._)("div",Y,[L,(0,o._)("div",J,[(0,o._)("div",null,[(0,o._)("div",null,[(0,o._)("h3",Q,[(0,o.Uk)((0,n.zw)(t.$t("confirm")),1),"codehash"==t.ctype?((0,o.wg)(),(0,o.iD)("span",X,"codeHash")):((0,o.wg)(),(0,o.iD)("span",tt,"contract")),(0,o.Uk)(" "+(0,n.zw)(t.$t("contracts.modals.removal")),1)]),(0,o._)("div",et,[(0,o._)("div",null,["codehash"===t.ctype?((0,o.wg)(),(0,o.iD)("div",at,[(0,o.Uk)((0,n.zw)(t.$t("contracts.modals.removeCode.first"))+" ",1),ot,(0,o.Uk)(" "+(0,n.zw)(t.$t("contracts.modals.removeCode.second")),1)])):((0,o.wg)(),(0,o.iD)("div",nt,[(0,o.Uk)((0,n.zw)(t.$t("contracts.modals.removeContract.first"))+" ",1),st,(0,o.Uk)(" "+(0,n.zw)(t.$t("contracts.modals.removeContract.second")),1)]))])])])]),(0,o._)("div",lt,[(0,o._)("button",{type:"button",class:"forget-button",onClick:e[0]||(e[0]=(...e)=>t.forget&&t.forget(...e))},(0,n.zw)(t.$t("forget")),1),(0,o._)("button",{type:"button",class:"cancel",onClick:e[1]||(e[1]=(...e)=>t.closeModal&&t.closeModal(...e))},(0,n.zw)(t.$t("cancel")),1)])])])])}const it=(0,o.aZ)({props:{ctype:{type:String,default:"codehash"}},emits:["update:is-open","forget"],setup(t,{emit:e}){const a=()=>{e("update:is-open",!1)},o=()=>{e("forget",!0)};return{closeModal:a,forget:o}}}),dt=(0,R.Z)(it,[["render",rt],["__scopeId","data-v-13e45303"]]),ct=dt;var ut=a(40019);const wt=(0,o.aZ)({components:{CodeItem:E,ModalConfirmRemoval:ct},setup(){const{api:t}=(0,g.h_)(),e=(0,r.qj)({modalConfirmRemoval:!1}),a=(0,p.useStore)(),o=(0,r.Fl)((()=>a.getters["contracts/getAllCode"])),n=(0,r.iH)(""),s=()=>{a.dispatch("contracts/loadAllContracts",{api:null===t||void 0===t?void 0:t.value})},l=t=>{e.modalConfirmRemoval=!0,n.value=t},i=()=>{try{const t=n.value;a.dispatch("contracts/forgetCode",{codeHash:t}),e.modalConfirmRemoval=!1}catch(t){ut.error(t)}};return s(),Object.assign({allCode:o,onConfirmRemoval:l,onForget:i},(0,r.BK)(e))}}),mt=(0,R.Z)(wt,[["render",m]]),pt=mt,gt={class:"tw-text-blue-900 dark:tw-text-white tw-text-lg tw-font-bold tw-mt-4 tw-mb-4 tw-leading-tight"},vt={class:"tw-grid tw-grid-cols-1 sm:tw-grid-cols-3 xl:tw-grid-cols-4 tw-gap-4"};function yt(t,e,a,s,l,r){const i=(0,o.up)("ContractItem"),d=(0,o.up)("ModalConfirmRemoval"),c=(0,o.up)("ModalCallContract");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("h2",gt,(0,n.zw)(t.$t("contracts.contracts")),1),(0,o._)("div",vt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.contracts,((e,a)=>((0,o.wg)(),(0,o.j4)(i,{key:e.address.toString(),contract:e,index:a,onCallMethod:t.onCallMethod,onConfirmRemoval:t.onConfirmRemoval},null,8,["contract","index","onCallMethod","onConfirmRemoval"])))),128))]),t.modalConfirmRemoval?((0,o.wg)(),(0,o.j4)(d,{key:0,isOpen:t.modalConfirmRemoval,"onUpdate:isOpen":e[0]||(e[0]=e=>t.modalConfirmRemoval=e),ctype:"contract",onForget:t.onForget},null,8,["isOpen","onForget"])):(0,o.kq)("",!0),t.modalCallContract?((0,o.wg)(),(0,o.j4)(c,{key:1,isOpen:t.modalCallContract,"onUpdate:isOpen":e[1]||(e[1]=e=>t.modalCallContract=e),contract:t.currentContract,"message-index":t.messageIndex},null,8,["isOpen","contract","message-index"])):(0,o.kq)("",!0)])}const ht={class:"tw-bg-white dark:tw-bg-darkGray-800 tw-shadow tw-rounded-lg tw-p-5 tw-mb-5"},ft={class:"tw-flex tw-items-center tw--mx-5 tw-px-4"},bt={class:"tw-h-8 tw-w-8 tw-rounded-full tw-overflow-hidden tw-border tw-border-gray-100 tw-mr-2"},xt={class:""},kt={class:"tw-text-blue-900 dark:tw-text-darkGray-100 tw-font-semibold tw-leading-tight tw-text-sm"},_t={class:"tw-text-xs tw-text-gray-500 dark:tw-text-darkGray-400 tw-font-normal tw-leading-tight"},Ct={class:"tw-pointer-events-none tw-hidden tw-absolute tw-top-0 tw-left-1/2 tw-z-10 tw-transform tw--translate-y-full tw--translate-x-1/2 tw-p-2 tw-text-xs tw-leading-tight tw-text-white tw-bg-gray-800 dark:tw-bg-darkGray-500 tw-rounded-md tw-shadow-lg"},At=["value"],Ht={class:"tw-grid tw-grid-cols-1 tw-gap-2 tw-my-4"},St={class:"tw-text-xs tw-text-gray-500 dark:tw-text-darkGray-400"},It={class:"tw-flex tw-justify-between tw-items-center"},Mt={class:"tw-text-xs tw-text-blue-900 dark:tw-text-darkGray-100"},jt={class:"tw-pointer-events-none tw-hidden tw-absolute tw-top-0 tw-left-1/2 tw-z-10 tw-transform tw--translate-y-full tw--translate-x-1/2 tw-p-2 tw-text-xs tw-leading-tight tw-text-white tw-bg-gray-800 dark:tw-bg-darkGray-500 tw-rounded-md tw-shadow-lg"},Gt=["value"],zt={class:"tw-text-xs tw-text-gray-500 dark:tw-text-darkGray-400"},Dt={key:0,class:"tw-text-xs tw-text-blue-900 dark:tw-text-darkGray-100"},Ut={class:"tw-text-right"},$t=["value"];function Ot(t,e,a,s,l,r){const i=(0,o.up)("icon-account-sample"),d=(0,o.up)("icon-base"),c=(0,o.up)("icon-document-duplicate"),u=(0,o.up)("Message");return(0,o.wg)(),(0,o.iD)("div",ht,[(0,o._)("div",ft,[(0,o._)("div",bt,[(0,o.Wm)(d,{class:"tw-h-full tw-w-full",viewBox:"0 0 64 64"},{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1})]),(0,o._)("div",xt,[(0,o._)("p",kt,(0,n.zw)(t.contractName),1),(0,o._)("p",_t,(0,n.zw)(t.shortenAddress),1)]),(0,o._)("button",{type:"button",class:"coppy-address-button tw-tooltip",onClick:e[0]||(e[0]=(...e)=>t.copyAddress&&t.copyAddress(...e))},[(0,o.Wm)(c),(0,o._)("span",Ct,(0,n.zw)(t.$t("copy")),1)]),(0,o._)("input",{id:"hiddenAddr",type:"hidden",value:t.address},null,8,At)]),(0,o._)("div",Ht,[(0,o._)("div",null,[(0,o._)("div",St,(0,n.zw)(t.$t("contracts.codeHash")),1),(0,o._)("div",It,[(0,o._)("div",Mt,(0,n.zw)(t.shortenCodeHash),1),(0,o._)("button",{type:"button",class:"coppy-code-hash-button tw-tooltip",onClick:e[1]||(e[1]=(...e)=>t.copyCodeHash&&t.copyCodeHash(...e))},[(0,o.Wm)(d,{class:"tw-h-5 tw-w-5 dark:tw-text-darkGray-100",viewBox:"0 0 20 20","aria-hidden":"true"},{default:(0,o.w5)((()=>[(0,o.Wm)(c)])),_:1}),(0,o._)("span",jt,(0,n.zw)(t.$t("copy")),1)]),(0,o._)("input",{id:"hiddenCodeHash",type:"hidden",value:t.realCodeHash},null,8,Gt)])]),(0,o._)("div",null,[(0,o._)("div",zt,(0,n.zw)(t.$t("contracts.msgs")),1),t.execMethods?((0,o.wg)(),(0,o.iD)("div",Dt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.execMethods,((e,a)=>((0,o.wg)(),(0,o.j4)(u,{key:e.identifier,message:e,"message-index":a,onCallMethod:t.onCallMethod},null,8,["message","message-index","onCallMethod"])))),128))])):(0,o.kq)("",!0)])]),(0,o._)("div",Ut,[(0,o._)("button",{type:"button",class:"coppy-abi-button",onClick:e[2]||(e[2]=(...e)=>t.copyABI&&t.copyABI(...e))},(0,n.zw)(t.$t("contracts.copyAbi")),1),(0,o._)("input",{id:"hiddenAbi",type:"hidden",value:t.abi},null,8,$t),(0,o._)("button",{type:"button",class:"forget-button",onClick:e[3]||(e[3]=(...e)=>t.onForget&&t.onForget(...e))},(0,n.zw)(t.$t("forget")),1)])])}var Ft=a(43886),Rt=a(28865);const Tt=(0,o.aZ)({components:{IconBase:c.Z,IconAccountSample:Rt.Z,IconDocumentDuplicate:I.Z,Message:q},props:{contract:{type:Object,required:!0},index:{type:Number,required:!0}},emits:["confirmRemoval","call-method"],setup(t,{emit:e}){var a;const{contract:o}=(0,r.BK)(t),n=o.value.address.toString(),s=(0,r.Fl)((()=>{var t,e,a;return null===(a=null===(e=null===(t=o.value)||void 0===t?void 0:t.abi)||void 0===e?void 0:e.json)||void 0===a?void 0:a.contract.name})),l=(0,r.Fl)((()=>(0,Ft.L)(n))),i=(0,r.Fl)((()=>{var t,e,a;return null===(a=null===(e=null===(t=o.value)||void 0===t?void 0:t.abi)||void 0===e?void 0:e.json)||void 0===a?void 0:a.source.hash})),d=(0,r.Fl)((()=>{const t=o.value.abi.json.source.hash;return t?`${t.slice(0,6)}${".".repeat(6)}${t.slice(-6)}`:""})),c=(0,p.useStore)(),u=(t,e)=>{var a=document.createElement("a");a.download=e,a.href=t,a.click()},w=a=>{e("call-method",t.index,a)},m=(0,r.iH)(o.value.abi),{messages:v}=(0,g.y_)(m),y=null===(a=v.value)||void 0===a?void 0:a.filter((t=>!t.isConstructor)),h=JSON.stringify(o.value.abi.json),f=()=>{const t="text/json;charset=utf-8,"+encodeURIComponent(h);u(t,"metadata.json")},b=()=>{e("confirmRemoval",o.value.address.toString())},x=t=>{c.dispatch("general/showAlertMsg",{msg:t,alertType:"success"})};return{address:n,contractName:s,shortenAddress:l,realCodeHash:i,shortenCodeHash:d,abi:h,execMethods:y,onCallMethod:w,onExport:f,onForget:b,showAlert:x}},methods:{copy(t,e){var a,o=document.querySelector(t);o.setAttribute("type","text"),o.select(),document.execCommand("copy"),o.setAttribute("type","hidden"),null===(a=window.getSelection())||void 0===a||a.removeAllRanges(),this.showAlert(e)},copyAddress(){this.copy("#hiddenAddr","Copy address success!!")},copyCodeHash(){this.copy("#hiddenCodeHash","Copy codehash success!!")},copyABI(){this.copy("#hiddenAbi","Copy ABI success!!")}}}),Pt=(0,R.Z)(Tt,[["render",Ot],["__scopeId","data-v-dbb5e7d4"]]),Zt=Pt,Wt=t=>((0,o.dD)("data-v-31b3b2c8"),t=t(),(0,o.Cn)(),t),qt={class:"tw-fixed tw-z-10 tw-inset-0 tw-overflow-y-auto"},Bt={class:"tw-flex tw-items-center tw-justify-center tw-min-h-screen"},Nt=Wt((()=>(0,o._)("div",{class:"tw-fixed tw-inset-0 tw-transition-opacity","aria-hidden":"true"},[(0,o._)("div",{class:"tw-absolute tw-inset-0 tw-bg-gray-900 dark:tw-bg-black tw-opacity-75"})],-1))),Et={class:"tw-inline-block tw-bg-white dark:tw-bg-darkGray-900 tw-rounded-lg tw-px-4 sm:tw-px-8 tw-py-10 tw-overflow-hidden tw-shadow-xl tw-transform tw-transition-all tw-mx-2 tw-my-2 tw-align-middle tw-max-w-lg tw-w-full"},Vt={class:"tw-text-lg tw-font-extrabold tw-text-blue-900 dark:tw-text-white tw-mb-6 tw-text-center"},Kt={class:"tw-grid tw-grid-cols-1 tw-gap-6"},Yt={class:"tw-block tw-text-sm tw-font-medium tw-text-gray-500 dark:tw-text-darkGray-400 tw-mb-2"},Lt=["value"],Jt={class:"tw-block tw-text-sm tw-font-medium tw-text-gray-500 dark:tw-text-darkGray-400 tw-mb-2"},Qt={class:"tw-flex tw-items-center tw-justify-between"},Xt={class:"tw-flex tw-items-center"},te={class:"tw-h-8 tw-w-8 tw-rounded-full tw-overflow-hidden tw-border tw-border-gray-100 tw-mr-3 tw-flex-shrink-0"},ee={class:"tw-ml-3 tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-pr-2 tw-pointer-events-none"},ae={key:0,class:"tw-block tw-absolute tw-mt-1 tw-w-full tw-rounded-md tw-bg-white dark:tw-bg-darkGray-800 tw-shadow-lg tw-z-10 tw-border tw-border-gray-200 dark:tw-border-darkGray-600"},oe={class:"tw-max-h-56 tw-rounded-md tw-py-1 tw-text-base tw-overflow-auto focus:tw-outline-none"},ne={class:"tw-block tw-text-sm tw-font-medium tw-text-gray-500 dark:tw-text-darkGray-400 tw-mb-2"},se={key:0,class:"tw-mt-5"},le={class:"tw-block tw-text-sm tw-font-medium tw-text-gray-500 dark:tw-text-darkGray-400 tw-mb-2"},re={class:"tw-max-h-56 tw-rounded-md tw-py-1 tw-text-base tw-overflow-auto focus:tw-outline-none"},ie={key:0,class:"tw-text-blue-700 tw-text-sm"},de={key:1,class:"tw-text-red-700 tw-text-sm"},ce={class:"tw-mt-6 tw-flex tw-justify-center tw-flex-row-reverse"};function ue(t,e,a,s,l,r){const i=(0,o.up)("icon-account-sample"),d=(0,o.up)("icon-base"),c=(0,o.up)("icon-solid-selector"),w=(0,o.up)("ModalSelectAccountOption"),m=(0,o.up)("input-amount");return(0,o.wg)(),(0,o.iD)("div",qt,[(0,o._)("div",Bt,[Nt,(0,o._)("div",Et,[(0,o._)("div",null,[(0,o._)("div",null,[(0,o._)("h3",Vt,(0,n.zw)(t.$t("contracts.modals.callContract")),1),(0,o._)("div",Kt,[(0,o._)("div",null,[(0,o._)("label",Yt,(0,n.zw)(t.$t("contracts.modals.contractToUse")),1),(0,o._)("input",{class:"tw-border tw-border-gray-300 dark:tw-border-darkGray-500 tw-rounded-md tw-w-full tw-text-blue-900 dark:tw-text-darkGray-100 focus:tw-outline-none tw-placeholder-gray-300 dark:tw-placeholder-darkGray-600 tw-px-3 tw-py-3 tw-appearance-none tw-bg-white dark:tw-bg-darkGray-900",placeholder:"A deployed contract that has either been deployed or attached.",disabled:"",value:t.contract.address},null,8,Lt)]),(0,o._)("div",null,[(0,o._)("label",Jt,(0,n.zw)(t.$t("contracts.modals.callFromAccount")),1),(0,o._)("button",{type:"button",class:"option-button",onClick:e[1]||(e[1]=e=>t.openOption=!t.openOption)},[(0,o._)("div",Qt,[(0,o._)("div",Xt,[(0,o._)("div",te,[(0,o.Wm)(d,{class:"tw-h-full tw-w-full",viewBox:"0 0 64 64"},{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1})]),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.toAddress=e),class:"tw-w-full tw-text-blue-900 dark:tw-text-darkGray-100 tw-text-xl focus:tw-outline-none tw-bg-transparent tw-placeholder-gray-300 dark:tw-placeholder-darkGray-600",style:{width:"21rem"},type:"text",spellcheck:"false"},null,512),[[u.nr,t.toAddress]])])]),(0,o._)("span",ee,[(0,o.Wm)(d,{class:"tw-h-5 tw-w-5 tw-text-gray-400 dark:tw-text-darkGray-300",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},{default:(0,o.w5)((()=>[(0,o.Wm)(c)])),_:1})])]),t.openOption?((0,o.wg)(),(0,o.iD)("div",ae,[(0,o._)("ul",oe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.allAccounts,((a,n)=>((0,o.wg)(),(0,o.j4)(w,{key:n,selOption:t.selAccount,"onUpdate:selOption":e[2]||(e[2]=e=>t.selAccount=e),"key-idx":n,address:a,"address-name":t.allAccountNames[n],checked:t.selAccount===n},null,8,["selOption","key-idx","address","address-name","checked"])))),128))])])):(0,o.kq)("",!0)]),(0,o._)("div",null,[(0,o._)("label",ne,(0,n.zw)(t.$t("contracts.modals.msgToSend")),1),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.messageMethod=e),class:"tw-w-full tw-text-blue-900 dark:tw-text-darkGray-100 tw-text-xl focus:tw-outline-none tw-bg-transparent tw-placeholder-gray-300 dark:tw-placeholder-darkGray-600",style:{width:"21rem"},type:"text",spellcheck:"false",disabled:""},null,512),[[u.nr,t.messageMethod]])]),t.isPayable?((0,o.wg)(),(0,o.j4)(m,{key:0,amount:t.endowment,"onUpdate:amount":e[4]||(e[4]=e=>t.endowment=e),selectedUnit:t.selectUnitEndowment,"onUpdate:selectedUnit":e[5]||(e[5]=e=>t.selectUnitEndowment=e),title:"Value","max-in-default-unit":t.endowment,"is-max-button":!1},null,8,["amount","selectedUnit","max-in-default-unit"])):(0,o.kq)("",!0),(0,o.Wm)(m,{amount:t.weight,"onUpdate:amount":e[6]||(e[6]=e=>t.weight=e),selectedUnit:t.selectUnitGas,"onUpdate:selectedUnit":e[7]||(e[7]=e=>t.selectUnitGas=e),title:"Max gas allowed","max-in-default-unit":t.weight,"is-max-button":!1},null,8,["amount","selectedUnit","max-in-default-unit"])]),t.outcomes?((0,o.wg)(),(0,o.iD)("div",se,[(0,o._)("label",le,(0,n.zw)(t.$t("contracts.modals.outcome")),1),(0,o._)("ul",re,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.outcomes,((t,e)=>((0,o.wg)(),(0,o.iD)("li",{key:`outcome-${e}`},[t.result.isOk?((0,o.wg)(),(0,o.iD)("div",ie,(0,n.zw)(t.output),1)):((0,o.wg)(),(0,o.iD)("div",de,(0,n.zw)(t.result),1))])))),128))])])):(0,o.kq)("",!0)])]),(0,o._)("div",ce,[t.isViaRpc?((0,o.wg)(),(0,o.iD)("button",{key:0,type:"button",class:"read-button",onClick:e[8]||(e[8]=(...e)=>t.readCallRpc&&t.readCallRpc(...e))},(0,n.zw)(t.$t("contracts.modals.read")),1)):((0,o.wg)(),(0,o.iD)("button",{key:1,type:"button",class:"excute-button",onClick:e[9]||(e[9]=(...e)=>t.execCallRpc&&t.execCallRpc(...e))},(0,n.zw)(t.$t("contracts.modals.execute")),1)),(0,o._)("button",{type:"button",class:"cancel",onClick:e[10]||(e[10]=(...e)=>t.closeModal&&t.closeModal(...e))},(0,n.zw)(t.$t("cancel")),1)])])])])}var we=a(89497),me=a(23822),pe=a(96265),ge=a(78191),ve=a(5418),ye=a(40019);const he=()=>{},fe={accountOffset:0,addressOffset:0,isHardware:!1,isMultisig:!1,isProxied:!1,isQr:!1,isUnlockable:!1,threshold:0,who:[]},be={};function xe(t){Date.now()>(be[t.address]||0)&&!t.isLocked&&t.lock()}function ke(t){if(!t)return fe;let e;try{e=ge.Nn.decodeAddress(t)}catch(d){return ye.error(d),fe}const a=ge.Nn.getPair(e),{isExternal:o,isHardware:n,isInjected:s,isMultisig:l,isProxied:r}=a.meta,i=!o&&!n&&!s;if(i){const t=be[a.address];t&&Date.now()>t&&!a.isLocked&&(a.lock(),be[a.address]=0)}return{accountOffset:a.meta.accountOffset||0,addressOffset:a.meta.addressOffset||0,hardwareType:a.meta.hardwareType,isHardware:!!n,isMultisig:!!l,isProxied:!!r,isQr:!!o&&!l&&!r&&!n&&!s,isUnlockable:i&&a.isLocked,threshold:a.meta.threshold||0,who:(a.meta.who||[]).map(_e)}}function _e(t){return ge.Nn.encodeAddress(ge.Nn.decodeAddress(t))}function Ce(t,{id:e,txFailedCb:a=he,txSuccessCb:o=he,txUpdateCb:n=he},s){return l=>{l&&l.status&&(ye.log(`${t}: status :: ${e} | ${JSON.stringify(l)}`),n(l),l.status.isFinalized||l.status.isInBlock?l.events.filter((({event:{section:t}})=>"system"===t)).forEach((({event:{method:t}})=>{"ExtrinsicFailed"===t?a(l):"ExtrinsicSuccess"===t&&o(l)})):l.isError&&a(l),l.isCompleted&&s())}}var Ae,He,Se=function(t,e,a,o){function n(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,s){function l(t){try{i(o.next(t))}catch(e){s(e)}}function r(t){try{i(o["throw"](t))}catch(e){s(e)}}function i(t){t.done?a(t.value):n(t.value).then(l,r)}i((o=o.apply(t,e||[])).next())}))},Ie=function(t,e,a,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(t,a):n?n.value=a:e.set(t,a),a},Me=function(t,e,a,o){if("a"===a&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?o:"a"===a?o.call(t):o?o.value:e.get(t)};let je=0;class Ge{constructor(t,e){Ae.set(this,void 0),He.set(this,void 0),Ie(this,Ae,e,"f"),Ie(this,He,t,"f")}signPayload(t){return Se(this,void 0,void 0,(function*(){return new Promise((e=>{const a=Me(this,He,"f").createType("ExtrinsicPayload",t,{version:t.version}).sign(Me(this,Ae,"f"));xe(Me(this,Ae,"f")),e(Object.assign({id:++je},a))}))}))}}Ae=new WeakMap,He=new WeakMap;var ze=a(76250),De=a.n(ze),Ue=a(40019),$e=function(t,e,a,o){function n(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,s){function l(t){try{i(o.next(t))}catch(e){s(e)}}function r(t){try{i(o["throw"](t))}catch(e){s(e)}}function i(t){t.done?a(t.value):n(t.value).then(l,r)}i((o=o.apply(t,e||[])).next())}))};function Oe(){const{api:t}=(0,g.h_)();function e(t,e,a,o){return $e(this,void 0,void 0,(function*(){t.txStartCb&&t.txStartCb();try{yield e.signAsync(a,o),Ue.info("sending",e.toHex());const n=yield e.send(Ce("signAndSend",t,(()=>{Ue.log("sent tx"),n()})))}catch(n){Ue.error("signAndSend: error:",n),t.txFailedCb&&t.txFailedCb(n)}}))}function a(t,e,{isMultiCall:a,multiRoot:o,proxyRoot:n,signAddress:s}){return $e(this,void 0,void 0,(function*(){let l=e.extrinsic;if(n&&(l=t.tx.proxy.proxy(n,null,l)),o){const e=t.tx.multisig?"multisig":"utility",n=yield t.query[e].multisigs(o,l.method.hash),{weight:r}=yield l.paymentInfo(o),{threshold:i,who:d}=ke(o),c=d.filter((t=>t!==s));let u=null;n.isSome&&(u=n.unwrap().when),l=a?6===t.tx[e].asMulti.meta.args.length?t.tx[e].asMulti(i,c,u,l.method.toHex(),!1,r):t.tx[e].asMulti(i,c,u,l.method):5===t.tx[e].approveAsMulti.meta.args.length?t.tx[e].approveAsMulti(i,c,u,l.method.hash,r):t.tx[e].approveAsMulti(i,c,u,l.method.hash)}return l}))}function o(t,e,a){return $e(this,void 0,void 0,(function*(){const o=ge.Nn.getPair(e);Ue.log("pair",o);const{meta:{isExternal:n,isHardware:s,isInjected:l,isProxied:r,source:i}}=o;if(s);else if(n&&!r);else if(l){const t=yield(0,ve.R0)(i);return["signing",e,Object.assign(Object.assign({},a),{signer:t.signer})]}return["signing",e,Object.assign(Object.assign({},a),{signer:new Ge(t.registry,o)})]}))}const n=(n,s)=>$e(this,void 0,void 0,(function*(){const l=null===t||void 0===t?void 0:t.value,r=new(De())(0);if(s.signAddress&&l){const[t,[i,d,c]]=yield Promise.all([a(l,n,s),o(l,s.signAddress,{nonce:-1,tip:r})]);Ue.log("sendStatus",i),yield e(n,t,d,c)}}));return{onSend:n}}var Fe=a(80433);function Re(t,e,a,o,n,s){const l=Fe.Z.author.submitAndWatchExtrinsic;let r;t&&(r=Array.isArray(t)?t:[t]);let i=[],d=0;const c=t=>{const e=++d,a=()=>{};i=[Object.assign(Object.assign({},t),{id:e,removeItem:a,rpc:t.rpc||l,status:"queued"})]},u=t=>c(Object.assign({},t));return null===r||void 0===r||r.forEach((t=>{u({accountId:e&&e.toString(),extrinsic:t,isUnsigned:!1,txFailedCb:o,txStartCb:a,txSuccessCb:n,txUpdateCb:s})})),{txqueue:i}}var Te=a(69378),Pe=a(72723),Ze=a(40019);const We=(0,o.aZ)({components:{ModalSelectAccountOption:Te.Z,InputAmount:Pe.Z,IconBase:c.Z,IconAccountSample:Rt.Z},props:{contract:{type:pe.C,required:!0},messageIndex:{type:Number,required:!0,default:0}},emits:["callResult","update:is-open"],setup(t,{emit:e}){const a=()=>{e("update:is-open",!1)},{defaultUnitToken:n,decimal:s}=(0,g.SG)(),l=(0,r.iH)(n.value),i=(0,r.iH)("nano"),d=(0,r.qj)({endowment:0,weight:200}),c=(0,p.useStore)(),u=(0,r.Fl)((()=>c.getters["general/allAccounts"])),w=(0,r.Fl)((()=>c.getters["general/allAccountNames"])),m=(0,r.iH)(!1),v=(0,r.iH)(0),y=(0,r.iH)(u.value[0]),h=(0,r.iH)(u.value[0]),f=(0,r.iH)(w.value[0]);(0,o.YP)(v,(()=>{y.value=u.value[v.value],f.value=w.value[v.value],h.value=u.value[v.value],m.value=!1}),{immediate:!0});const b=(0,r.iH)(),x=t.contract.abi.messages[t.messageIndex],k=x.method,_=x.isPayable,C=t.contract.hasRpcContractsCall&&!x.isMutating&&!x.isPayable,{onSend:A}=Oe(),H=(0,me.Wy)("nano"),S=we.VB(d.weight,H,s.value);Ze.log("toWeight",S.toString(10));const I=()=>{let e=null;try{e=t.contract.tx[x.method]({gasLimit:S,value:_?d.endowment:0})}catch(w){const t=w.message;return Ze.error(t),void c.dispatch("general/showAlertMsg",{msg:t,alertType:"error"})}Ze.log("callTx",e);const o=t=>{Ze.error("_onFailed",t),c.commit("general/setLoading",!1),c.dispatch("general/showAlertMsg",{msg:t,alertType:"error"})},n=()=>{Ze.log("_onStart"),c.commit("general/setLoading",!0)},s=t=>{Ze.log("_onSuccess",t),c.commit("general/setLoading",!1),c.dispatch("general/showAlertMsg",{msg:"Success to call contract for executing",alertType:"success"}),a()},l=()=>{Ze.log("_onUpdateTx")},{txqueue:r}=Re(e,h.value,n,o,s,l);Ze.log("txQueue",r);const i=r[0],u={isMultiCall:!1,isUnlockCached:!1,multiRoot:null,proxyRoot:null,signAddress:h.value,signPassword:""};A(i,u)},M=()=>{const a=x?x.args:[];Ze.log("message",x),Ze.log("form",d),t.contract.query[x.method](y.value,{gasLimit:S,value:_?d.endowment:0},...a).then((t=>{Ze.log("result",t);const o=b.value?b.value:[];b.value=[Object.assign(Object.assign({},t),{from:y.value,message:x,params:a,when:new Date}),...o],e("callResult",t)})).catch((t=>{Ze.error(t)}))};return Object.assign(Object.assign({},(0,r.BK)(d)),{closeModal:a,openOption:m,allAccounts:u,allAccountNames:w,toAddress:h,messageMethod:k,selAccount:v,selectUnitEndowment:l,selectUnitGas:i,isPayable:_,isViaRpc:C,execCallRpc:I,readCallRpc:M,outcomes:b})}}),qe=(0,R.Z)(We,[["render",ue],["__scopeId","data-v-31b3b2c8"]]),Be=qe;var Ne=a(63872),Ee=a(40019);function Ve(t,e=null){let a;try{const o=ge.Nn.getAddress(t,e);a=o&&o.meta}catch(o){}return a||{}}function Ke(t,e){if(!t)return null;let a;const o=Ve(t,"contract");try{const t=o.contract&&JSON.parse(o.contract.abi);a=new Ne.P(t,e.registry.getChainProperties())}catch(n){Ee.error(n)}return a||null}function Ye(t,e){if(e){const a=Ke(e,t);return a?new pe.C(t,a,e):null}return null}var Le=a(40019);const Je=(0,o.aZ)({components:{ContractItem:Zt,ModalConfirmRemoval:ct,ModalCallContract:Be},setup(){const{api:t}=(0,g.h_)(),e=(0,r.qj)({modalConfirmRemoval:!1,modalCallContract:!1}),{allContracts:a}=(0,g.GP)();function o(t,e=[]){return e.map((e=>Ye(t,e.toString()))).filter((t=>!!t))}const n=(0,r.Fl)((()=>o(null===t||void 0===t?void 0:t.value,a.value))),s=(0,r.iH)(0),l=(0,r.iH)(0),i=(0,r.iH)(""),d=(0,r.Fl)((()=>n.value[s.value])),c=(t,a)=>{e.modalCallContract=!0,s.value=t,l.value=a,Le.log("c",t+"/"+a)},u=t=>{e.modalConfirmRemoval=!0,i.value=t},w=()=>{try{ge.Nn.forgetContract(i.value),e.modalConfirmRemoval=!1}catch(t){Le.error(t)}};return Object.assign({contracts:n,onCallMethod:c,onConfirmRemoval:u,onForget:w,currentContract:d,messageIndex:l},(0,r.BK)(e))}}),Qe=(0,R.Z)(Je,[["render",yt]]),Xe=Qe,ta=t=>((0,o.dD)("data-v-022b0434"),t=t(),(0,o.Cn)(),t),ea={class:"tw-flex tw-items-center tw-justify-center tw-min-h-screen"},aa=ta((()=>(0,o._)("div",{class:"tw-fixed tw-inset-0 tw-transition-opacity","aria-hidden":"true"},[(0,o._)("div",{class:"tw-absolute tw-inset-0 tw-bg-gray-900 dark:tw-bg-black tw-opacity-75"})],-1))),oa={class:"tw-text-lg tw-font-extrabold tw-text-blue-900 dark:tw-text-white tw-mb-6 tw-text-center"},na={key:0,class:"sm:tw-flex tw-grid tw-grid-cols-1 sm:tw-grid-cols-2 tw-gap-6"},sa={class:"sm:tw-w-1/2"},la={class:"tw-grid tw-grid-cols-1 tw-gap-6"},ra={class:"tw-relative"},ia={class:"tw-block tw-text-sm tw-font-medium tw-text-gray-500 dark:tw-text-darkGray-400 tw-mb-2"},da={class:"tw-flex tw-items-center tw-justify-between"},ca={class:"tw-flex tw-items-center"},ua={class:"tw-h-8 tw-w-8 tw-rounded-full tw-overflow-hidden tw-border tw-border-gray-100 tw-mr-3 tw-flex-shrink-0"},wa={class:"tw-ml-3 tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-pr-2 tw-pointer-events-none"},ma={key:0,class:"tw-block tw-absolute tw-mt-1 tw-w-full tw-rounded-md tw-bg-white dark:tw-bg-darkGray-800 tw-shadow-lg tw-z-10 tw-border tw-border-gray-200 dark:tw-border-darkGray-600"},pa={class:"tw-max-h-56 tw-rounded-md tw-py-1 tw-text-base tw-overflow-auto focus:tw-outline-none"},ga={class:"tw-block tw-text-sm tw-font-medium tw-text-gray-500 dark:tw-text-darkGray-400 tw-mb-2"},va={key:0,class:"tw-inline-flex tw-text-red-700 tw-text-xs"},ya={class:"sm:tw-w-1/2"},ha={class:"tw-grid tw-grid-cols-1 tw-gap-6"},fa={class:"tw-block tw-text-sm tw-font-medium tw-text-gray-500 dark:tw-text-darkGray-400 tw-mb-2"},ba={key:1,class:"dark:tw-text-white"},xa={class:"tw-mt-6 tw-flex tw-justify-end"},ka=["disabled"],_a={key:1};function Ca(t,e,a,s,l,r){var i;const d=(0,o.up)("icon-account-sample"),c=(0,o.up)("icon-base"),w=(0,o.up)("icon-solid-selector"),m=(0,o.up)("ModalSelectAccountOption"),p=(0,o.up)("input-amount"),g=(0,o.up)("balance"),v=(0,o.up)("input-file"),y=(0,o.up)("contract-info"),h=(0,o.up)("params-generator");return(0,o.wg)(),(0,o.iD)("div",{class:"tw-fixed tw-z-10 tw-inset-0 tw-overflow-y-auto",onClick:e[15]||(e[15]=(...e)=>t.closeModal&&t.closeModal(...e))},[(0,o._)("div",ea,[aa,(0,o._)("div",{class:"tw-inline-block tw-bg-white dark:tw-bg-darkGray-900 tw-rounded-lg tw-px-4 sm:tw-px-8 tw-py-10 tw-overflow-hidden tw-shadow-xl tw-transform tw-transition-all tw-mx-2 tw-my-2 tw-align-middle tw-max-w-4xl tw-w-full",onClick:e[14]||(e[14]=(0,u.iM)((()=>{}),["stop"]))},[(0,o._)("div",null,[(0,o._)("h3",oa,(0,n.zw)(t.$t("contracts.modals.createYourDapps",{step:t.step})),1),1===t.step?((0,o.wg)(),(0,o.iD)("div",na,[(0,o._)("div",sa,[(0,o._)("div",la,[(0,o._)("div",ra,[(0,o._)("label",ia,(0,n.zw)(t.$t("contracts.modals.deploymentAccount")),1),(0,o._)("button",{type:"button",class:"option-button",onClick:e[1]||(e[1]=e=>t.openOption=!t.openOption)},[(0,o._)("div",da,[(0,o._)("div",ca,[(0,o._)("div",ua,[(0,o.Wm)(c,{class:"tw-h-full tw-w-full",viewBox:"0 0 64 64"},{default:(0,o.w5)((()=>[(0,o.Wm)(d)])),_:1})]),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.toAddress=e),class:"tw-w-full tw-text-blue-900 dark:tw-text-darkGray-100 tw-text-xl focus:tw-outline-none tw-bg-transparent tw-placeholder-gray-300 dark:tw-placeholder-darkGray-600",style:{width:"21rem"},type:"text",spellcheck:"false"},null,512),[[u.nr,t.toAddress]])])]),(0,o._)("span",wa,[(0,o.Wm)(c,{class:"tw-h-5 tw-w-5 tw-text-gray-400 dark:tw-text-darkGray-300",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},{default:(0,o.w5)((()=>[(0,o.Wm)(w)])),_:1})])]),t.openOption?((0,o.wg)(),(0,o.iD)("div",ma,[(0,o._)("ul",pa,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.substrateAccounts,((a,n)=>((0,o.wg)(),(0,o.j4)(m,{key:n,selOption:t.selAccount,"onUpdate:selOption":e[2]||(e[2]=e=>t.selAccount=e),address:a.address,"address-name":a.name,checked:t.selAccount===a.address},null,8,["selOption","address","address-name","checked"])))),128))])])):(0,o.kq)("",!0)]),(0,o._)("div",null,[(0,o._)("label",ga,(0,n.zw)(t.$t("contracts.modals.projectName")),1),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[3]||(e[3]=e=>t.projectName=e),class:"tw-border tw-border-gray-300 dark:tw-border-darkGray-500 tw-rounded-md tw-w-full tw-text-blue-900 dark:tw-text-darkGray-100 focus:tw-outline-none tw-placeholder-gray-300 dark:tw-placeholder-darkGray-600 tw-px-3 tw-py-3 tw-appearance-none tw-bg-white dark:tw-bg-darkGray-900",placeholder:""},null,512),[[u.nr,t.projectName]])]),(0,o.Wm)(p,{amount:t.endowment,"onUpdate:amount":e[4]||(e[4]=e=>t.endowment=e),selectedUnit:t.selectUnitEndowment,"onUpdate:selectedUnit":e[5]||(e[5]=e=>t.selectUnitEndowment=e),title:"Endowment","max-in-default-unit":t.endowment,"is-max-button":!1},null,8,["amount","selectedUnit","max-in-default-unit"]),t.isInsufficientFee?((0,o.wg)(),(0,o.iD)("div",va,[(0,o.Uk)((0,n.zw)(t.$t("contracts.modals.fees.feesOf"))+" ",1),(0,o.Wm)(g,{class:"tw-ml-1 tw-mr-1",balance:t.partialFee,decimals:t.decimal,unit:t.defaultUnitToken},null,8,["balance","decimals","unit"]),(0,o.Uk)(" "+(0,n.zw)(t.$t("contracts.modals.fees.appliedToSubmission")),1)])):(0,o.kq)("",!0),(0,o.Wm)(p,{amount:t.weight,"onUpdate:amount":e[6]||(e[6]=e=>t.weight=e),selectedUnit:t.selectUnitGas,"onUpdate:selectedUnit":e[7]||(e[7]=e=>t.selectUnitGas=e),title:"Max gas allowed","max-in-default-unit":t.weight,"is-max-button":!1},null,8,["amount","selectedUnit","max-in-default-unit"])])]),(0,o._)("div",ya,[(0,o._)("div",ha,[(0,o._)("div",null,[(0,o._)("label",fa,(0,n.zw)(t.$t("contracts.modals.contractFile")),1),(0,o.Wm)(v,{file:t.wasmFromFile,extension:t.extensionFile,onDropFile:t.onDropFile},null,8,["file","extension","onDropFile"])]),(0,o.Wm)(y,{messages:t.messages},null,8,["messages"])])])])):((0,o.wg)(),(0,o.iD)("div",ba,[(0,o.Wm)(h,{constructorIndex:t.constructorIndex,"onUpdate:constructorIndex":e[8]||(e[8]=e=>t.constructorIndex=e),params:t.params,"onUpdate:params":e[9]||(e[9]=e=>t.params=e),constructors:null===(i=t.messages)||void 0===i?void 0:i.filter((t=>t.isConstructor))},null,8,["constructorIndex","params","constructors"])]))]),(0,o._)("div",xa,[(0,o._)("button",{type:"button",class:"cancel-button",onClick:e[10]||(e[10]=(...e)=>t.closeModal&&t.closeModal(...e))},(0,n.zw)(t.$t("cancel")),1),1===t.step?((0,o.wg)(),(0,o.iD)("button",{key:0,type:"button",disabled:!t.canMoveToStep2,class:(0,n.C_)(["next-step-button",{"tw-placeholder-opacity-90":!t.canMoveToStep2,"dark-bg-blue":t.canMoveToStep2,"hover:tw-bg-blue-700":t.canMoveToStep2,"tw-cursor-not-allowed":!t.canMoveToStep2}]),onClick:e[11]||(e[11]=(...e)=>t.moveStep2&&t.moveStep2(...e))},(0,n.zw)(t.$t("contracts.modals.nextStep")),11,ka)):(0,o.kq)("",!0),2===t.step?((0,o.wg)(),(0,o.iD)("div",_a,[(0,o._)("button",{type:"button",class:"previous-step-button",onClick:e[12]||(e[12]=e=>t.step=1)},(0,n.zw)(t.$t("contracts.modals.previousStep")),1),(0,o._)("button",{type:"button",class:"upload-button",onClick:e[13]||(e[13]=(...e)=>t.upload&&t.upload(...e))},(0,n.zw)(t.$t("contracts.modals.upload")),1)])):(0,o.kq)("",!0)])])])])}var Aa=a(43968),Ha=a(24456),Sa=a(47573),Ia=a(54779),Ma=a(37698),ja=a(11920),Ga=a(92939),za=a(40019);function Da(t=null,e=!1){var a;const{api:o}=(0,g.h_)(),n=null===(a=null===o||void 0===o?void 0:o.value)||void 0===a?void 0:a.registry,s=null===n||void 0===n?void 0:n.getChainProperties(),l=t?(0,r.iH)(new Ne.P(null===t||void 0===t?void 0:t.abi,s)):(0,r.iH)(null),i=(0,r.iH)(!!(null===t||void 0===t?void 0:t.abi)),d=(0,r.iH)(!e||!!(null===t||void 0===t?void 0:t.abi)),c=(0,r.iH)(!1),u=(0,r.iH)(""),w=(0,p.useStore)(),m=({data:e})=>{const a=(0,Ga.z)(e);try{const e=JSON.parse(a);if(e.deploy||e.messages)throw new Error("You are using an ABI with an outdated format. Please generate a new one.");const n=JSON.parse(a);l.value=new Ne.P(n,s),c.value=!1,i.value=!0,d.value=!0,(null===t||void 0===t?void 0:t.codeHash)&&w.dispatch("contracts/saveCode",{api:null===o||void 0===o?void 0:o.value,_codeHash:null===t||void 0===t?void 0:t.codeHash,partial:{abi:a}})}catch(n){za.error(n),i.value=!1,d.value=!1,c.value=!0,u.value=n}},v=()=>{i.value=!1,d.value=!1,c.value=!1,(null===t||void 0===t?void 0:t.codeHash)&&w.dispatch("contracts/saveCode",{api:null===o||void 0===o?void 0:o.value,_codeHash:null===t||void 0===t?void 0:t.codeHash,partial:{abi:null}})};return{abi:l,errorText:u,isAbiError:c,isAbiSupplied:i,isAbiValid:d,onChangeAbi:m,onRemoveAbi:v}}var Ua=a(74890),$a=a(43600),Oa=a(62083),Fa=a(20180),Ra=a(98293),Ta=a(40019);const Pa=[];function Za(t,e){if(e.info===Oa.u.Vec)return[Za(t,e.sub)];if(e.info===Oa.u.Tuple)return Array.isArray(e.sub)?e.sub.map((e=>Za(t,e))):[];if(e.info===Oa.u.Struct)return Array.isArray(e.sub)?e.sub.reduce(((e,a)=>(e[a.name]=Za(t,a),e)),{}):{};if(e.info===Oa.u.Enum)return Array.isArray(e.sub)?{[e.sub[0].name]:Za(t,e.sub[0])}:{};const a=[Oa.u.Compact,Oa.u.Option].includes(e.info)?e.sub.type:e.type;switch(a){case"AccountIndex":case"Balance":case"BalanceOf":case"BlockNumber":case"Compact":case"Gas":case"Index":case"Nonce":case"ParaId":case"PropIndex":case"ProposalIndex":case"ReferendumIndex":case"i8":case"i16":case"i32":case"i64":case"i128":case"u8":case"u16":case"u32":case"u64":case"u128":case"VoteIndex":return Fa.nw;case"bool":return!1;case"Bytes":return;case"String":case"Text":return"";case"Moment":return Fa.nw;case"Vote":return-1;case"VoteThreshold":return 0;case"BlockHash":case"CodeHash":case"Hash":case"H256":return null===t||void 0===t?void 0:t.createType("H256");case"H512":return null===t||void 0===t?void 0:t.createType("H512");case"H160":return null===t||void 0===t?void 0:t.createType("H160");case"Raw":case"Keys":return"";case"AccountId":case"AccountIdOf":case"Address":case"Call":case"CandidateReceipt":case"Digest":case"Header":case"KeyValue":case"LookupSource":case"MisbehaviorReport":case"Proposal":case"Signature":case"SessionKey":case"StorageKey":case"ValidatorId":return;case"Extrinsic":return null===t||void 0===t?void 0:t.createType("Raw");case"Null":return null;default:{let n=null;try{const e=null===t||void 0===t?void 0:t.createType(a);if(e){const a=(0,$a.s)(e.toRawType());if((0,Ra.H)(e))return Fa.nw;if([Oa.u.Struct].includes(a.info))return;if([Oa.u.Enum,Oa.u.Tuple].includes(a.info))return Za(t,a)}}catch(o){n=o.message}return Pa.includes(a)||(Pa.push(a),n&&Ta.error(`params: initValue: ${n}`),Ta.info(`params: initValue: No default value for type ${a} from ${JSON.stringify(e)}, using defaults`)),"0x"}}}function Wa(t,e){const a=Za(t,e.type);return{isValid:!(0,Ua.o)(a),value:a}}function qa(t,e){const a=null===e||void 0===e?void 0:e.reduce(((e,a)=>[...e,Wa(t,a)]),[]),o=null===a||void 0===a?void 0:a.map((({value:t})=>t));return o}const Ba=t=>t.args.map((({name:t,type:e})=>`${t}: ${e.type}`)).join(", "),Na={key:0};function Ea(t,e,a,n,s,l){const r=(0,o.up)("Message");return t.messages?((0,o.wg)(),(0,o.iD)("div",Na,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.messages,(t=>((0,o.wg)(),(0,o.j4)(r,{key:t.identifier,message:t},null,8,["message"])))),128))])):(0,o.kq)("",!0)}const Va=(0,o.aZ)({components:{Message:q},props:{messages:{required:!0,type:Array}}}),Ka=(0,R.Z)(Va,[["render",Ea]]),Ya=Ka,La={class:"tw-relative"},Ja={class:"tw-block tw-text-sm tw-font-medium tw-text-gray-500 dark:tw-text-darkGray-400 tw-mb-2"},Qa={class:"tw-flex tw-items-center tw-justify-between"},Xa={class:"tw-flex tw-items-center"},to={class:"tw-flex"},eo={class:"tw-font-semibold tw-text-blue-400"},ao={class:"tw-ml-3 tw-absolute tw-inset-y-0 tw-right-0 tw-flex tw-items-center tw-pr-2 tw-pointer-events-none"},oo={key:0,class:"tw-block tw-absolute tw-mt-1 tw-w-full tw-rounded-md tw-bg-white dark:tw-bg-darkGray-800 tw-shadow-lg tw-z-10 tw-border tw-border-gray-200 dark:tw-border-darkGray-600"},no={class:"tw-max-h-56 tw-rounded-md tw-text-base tw-overflow-auto focus:tw-outline-none"},so=["onClick"],lo={class:"tw-flex tw-items-center tw-justify-between"},ro={class:"tw-flex tw-items-center"},io={class:"tw-flex dark:tw-text-white tw-px-4 tw-py-2"},co={class:"tw-font-semibold tw-text-blue-400"},uo={class:"tw-mt-7 tw-ml-6"},wo={key:0,class:"tw-ml-5 tw-pl-10 tw-my-3"},mo={class:"tw-mb-3 tw-font-bold"},po=["value","onInput"];function go(t,e,a,s,l,r){const i=(0,o.up)("icon-solid-selector"),d=(0,o.up)("icon-base"),c=(0,o.up)("InputAmount");return(0,o.wg)(),(0,o.iD)("div",La,[(0,o._)("label",Ja,(0,n.zw)(t.$t("contracts.modals.instantiationConstructor")),1),(0,o._)("button",{type:"button",class:"option-button",onClick:e[0]||(e[0]=e=>t.openOption=!t.openOption)},[(0,o._)("div",Qa,[(0,o._)("div",Xa,[(0,o._)("div",to,[(0,o._)("div",eo,(0,n.zw)(t.constructors[t.constructorIndex].identifier),1),(0,o._)("div",null,(0,n.zw)(`(${t.argsStrings[t.constructorIndex]})`),1)])])]),(0,o._)("span",ao,[(0,o.Wm)(d,{class:"tw-h-5 tw-w-5 tw-text-gray-400 dark:tw-text-darkGray-300",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},{default:(0,o.w5)((()=>[(0,o.Wm)(i)])),_:1})])]),t.openOption?((0,o.wg)(),(0,o.iD)("div",oo,[(0,o._)("ul",no,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.constructors,(e=>((0,o.wg)(),(0,o.iD)("div",{key:e.index,class:"constructor-div",onClick:a=>t.onSelectConstructor(e.index)},[(0,o._)("div",lo,[(0,o._)("div",ro,[(0,o._)("div",io,[(0,o._)("div",co,(0,n.zw)(e.identifier),1),(0,o._)("div",null,(0,n.zw)(`(${t.argsStrings[e.index]})`),1)])])])],8,so)))),128))])])):(0,o.kq)("",!0),(0,o._)("div",uo,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.argsStrings[t.constructorIndex].split(","),((a,s)=>((0,o.wg)(),(0,o.iD)("div",{key:s},[t.constructors[t.constructorIndex].args.length?((0,o.wg)(),(0,o.iD)("div",wo,[(0,o._)("div",mo,(0,n.zw)(a),1),t.isBalanceType(s)?((0,o.wg)(),(0,o.j4)(c,{key:0,amount:t.balance,"onUpdate:amount":e[1]||(e[1]=e=>t.balance=e),selectedUnit:t.unit,"onUpdate:selectedUnit":e[2]||(e[2]=e=>t.unit=e),"is-max-button":!1,onInput:e=>t.updateParam({balance:t.balance,unit:t.unit},s)},null,8,["amount","selectedUnit","onInput"])):((0,o.wg)(),(0,o.iD)("input",{key:1,class:"params-input",type:"string",value:t.params[s]&&t.params[s].value,onInput:e=>t.updateParam(e.target.value,s)},null,40,po))])):(0,o.kq)("",!0)])))),128))])])}const vo=(0,o.aZ)({components:{IconBase:c.Z,IconSolidSelector:Aa.Z,InputAmount:Pe.Z},props:{constructors:{required:!0,type:Array},params:{required:!0,type:Array},constructorIndex:{required:!0,type:Number}},emits:["update:params","update:constructorIndex"],setup(t,{emit:e}){var a,n;const s=(0,r.iH)(!1),l=t.constructors.map(Ba).map((t=>t||" ")),i=t=>{e("update:constructorIndex",t),s.value=!1},{api:d}=(0,g.h_)(),c=(0,r.iH)(new(De())(0)),u=null===(n=null===(a=null===d||void 0===d?void 0:d.value)||void 0===a?void 0:a.registry)||void 0===n?void 0:n.chainTokens,w=(0,r.iH)((u||[])[0]),m=e=>"Balance"===t.constructors[t.constructorIndex].args[e].type.type;(0,o.YP)((()=>t.constructorIndex),(a=>{var o;const n=qa(null===(o=null===d||void 0===d?void 0:d.value)||void 0===o?void 0:o.registry,t.constructors[a].args).map(((e,o)=>{let n=e;return m(o)&&(n={balance:c.value,unit:w.value}),{info:t.constructors[a].args[o].type.info,type:t.constructors[a].args[o].type.type,value:n}}));e("update:params",n)}),{immediate:!0});const p=(a,o)=>{const n=t.params;n[o].value=a,e("update:params",n)};return{openOption:s,argsStrings:l,onSelectConstructor:i,isBalanceType:m,balance:c,unit:w,updateParam:p}}}),yo=(0,R.Z)(vo,[["render",go],["__scopeId","data-v-173083d6"]]),ho=yo;var fo=a(87062),bo=a(20244),xo=a(40019),ko=function(t,e,a,o){function n(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,s){function l(t){try{i(o.next(t))}catch(e){s(e)}}function r(t){try{i(o["throw"](t))}catch(e){s(e)}}function i(t){t.done?a(t.value):n(t.value).then(l,r)}i((o=o.apply(t,e||[])).next())}))};const _o=(0,o.aZ)({components:{IconBase:c.Z,IconAccountSample:Rt.Z,IconSolidSelector:Aa.Z,ModalSelectAccountOption:Te.Z,InputFile:Ha.Z,ContractInfo:Ya,ParamsGenerator:ho,InputAmount:Pe.Z,Balance:Sa.Z},emits:["update:is-open"],setup(t,{emit:e}){const a=()=>{e("update:is-open",!1)},n=(0,p.useStore)(),s=(0,r.Fl)((()=>n.getters["general/selectedAddress"])),l=(0,r.Fl)((()=>{const t=n.getters["general/substrateAccounts"],e=(0,bo.uW)(t),a=t.filter((t=>e&&t.source===e.source));return a})),i=(0,r.iH)(!1),{defaultUnitToken:d,decimal:c}=(0,g.SG)(),u=(0,r.iH)(d.value),w=(0,r.iH)("nano"),m=(0,r.qj)({endowment:0,weight:200,projectName:"",projectDesc:"",webpage:""}),v=(0,bo.uW)(l.value),y=(0,r.iH)(s.value),h=(0,r.iH)(s.value),f=(0,r.iH)(s.value),b=(0,r.iH)(v?v.name:"");(0,o.YP)(y,(()=>{const t=l.value.find((t=>t.address===y.value));t&&(h.value=t.address,b.value=t.name,f.value=t.address,i.value=!1)}),{immediate:!0});const x=(0,r.Fl)((()=>{const t=h.value;return`${t.slice(0,6)}${".".repeat(6)}${t.slice(-6)}`})),{api:k}=(0,g.h_)(),_=null===k||void 0===k?void 0:k.value,{abi:C,onChangeAbi:A,onRemoveAbi:H}=Da(),{fileRef:S,setFile:I,validate:M}=(0,ja.T)({onChange:A,onRemove:H,validate:t=>"0,97,115,109"===(null===t||void 0===t?void 0:t.data.subarray(0,4).toString())}),j=[".contract",".json"],G=t=>{I(t)},{messages:z}=(0,g.y_)(C),{wasm:D,isWasmValid:U}=(0,g.vc)(C,S.value,M),{onSend:$}=Oe(),O=(0,r.iH)(0),F=(0,r.iH)([]),R=(0,r.iH)(new(De())(0)),T=t=>{xo.error("_onFailed",t),n.commit("general/setLoading",!1),n.dispatch("general/showAlertMsg",{msg:t,alertType:"error"})},P=()=>{xo.log("_onStart"),n.commit("general/setLoading",!0)},Z=t=>{var e,o;xo.log("_onSuccess",t);const s=null===(e=t.blueprint)||void 0===e?void 0:e.codeHash,l={abi:(0,Ia.P)(null===(o=t.blueprint)||void 0===o?void 0:o.abi.json),name:m.projectName||"<>",tags:[]};xo.log("codeHash",null===s||void 0===s?void 0:s.toHex()),xo.log("codeJson",l),t.blueprint&&n.dispatch("contracts/saveCode",{api:_,_codeHash:s,partial:l}),t.contract&&ge.Nn.saveContract(t.contract.address.toString(),{contract:{abi:(0,Ia.P)(t.contract.abi.json),genesisHash:_.genesisHash.toHex()},name:m.projectName||"<>",tags:[]}),n.commit("general/setLoading",!1),n.dispatch("general/showAlertMsg",{msg:`Success to deploying contract- codeHash: ${null===s||void 0===s?void 0:s.toHex()} `,alertType:"success"}),a()},W=()=>{xo.log("_onUpdateTx")},q=(0,r.iH)(),B=(0,r.iH)(new(De())(0)),N=()=>ko(this,void 0,void 0,(function*(){var t,e,a,o,s;if(""===m.projectName||""===f.value||null===D.value||!U)return void n.dispatch("general/showAlertMsg",{msg:"Please check fields again",alertType:"error"});const l=C.value;let r=null;try{const n=new fo.E(_,l,D.value);xo.log("code",n);const s=(0,me.Wy)(u.value);B.value=we.VB(m.endowment,s,c.value),xo.log("toEndowment",B.value.toString(10));const i=(0,me.Wy)(w.value),d=we.VB(m.weight,i,c.value);xo.log("toWeight",d.toString(10));const p=null===(t=null===C||void 0===C?void 0:C.value)||void 0===t?void 0:t.constructors[O.value].args;xo.log("params",p);const g=qa(null===(e=C.value)||void 0===e?void 0:e.registry,p);xo.log("values",g),r=n&&(null===(a=C.value)||void 0===a?void 0:a.constructors[O.value].method)&&m.endowment?n.tx[null===(o=C.value)||void 0===o?void 0:o.constructors[O.value].method]({gasLimit:d,value:B.value},...g):null}catch(p){const t=p.message;return xo.error(t),void n.dispatch("general/showAlertMsg",{msg:t,alertType:"error"})}xo.log("uploadTx",r);const{txqueue:i}=Re(r,f.value,P,T,Z,W);xo.log("txQueue",i);const d=i[0];if(d.accountId&&d.extrinsic&&(0,Ma.m)(d.extrinsic.paymentInfo))try{const t=yield null===(s=d.extrinsic)||void 0===s?void 0:s.paymentInfo(d.accountId);R.value=t.partialFee.toBn().muln(100)}catch(g){xo.error(g)}q.value=d})),E=()=>ko(this,void 0,void 0,(function*(){yield N();const t=null===q||void 0===q?void 0:q.value;if(t){const e={isMultiCall:!1,isUnlockCached:!1,multiRoot:null,proxyRoot:null,signAddress:f.value,signPassword:""};$(t,e)}else xo.log("there's no pending tx")})),V=(0,r.iH)(1),K=(0,r.Fl)((()=>!!C.value&&m.projectName&&m.endowment&&m.weight)),Y=(0,r.iH)(!1),L=()=>ko(this,void 0,void 0,(function*(){try{yield N()}catch(a){return void xo.error(a)}const t=we.VB(1,0,c.value),e=R.value.add(t);xo.log("required_endowment",e.toString(10)),B.value.lte(e)&&(Y.value=!0,B.value=e),V.value=2}));return Object.assign(Object.assign({},(0,r.BK)(m)),{closeModal:a,openOption:i,selAccount:y,toAccountName:b,toAddress:f,shortenToAddress:x,upload:E,wasmFromFile:S,extensionFile:j,onDropFile:G,messages:z,step:V,canMoveToStep2:K,constructorIndex:O,params:F,selectUnitEndowment:u,selectUnitGas:w,defaultUnitToken:d,decimal:c,partialFee:R,isInsufficientFee:Y,moveStep2:L,substrateAccounts:l})}}),Co=(0,R.Z)(_o,[["render",Ca],["__scopeId","data-v-022b0434"]]),Ao=Co,Ho=t=>((0,o.dD)("data-v-d92e4a8e"),t=t(),(0,o.Cn)(),t),So={class:"tw-flex tw-items-center tw-justify-center tw-min-h-screen"},Io=Ho((()=>(0,o._)("div",{class:"tw-fixed tw-inset-0 tw-transition-opacity","aria-hidden":"true"},[(0,o._)("div",{class:"tw-absolute tw-inset-0 tw-bg-gray-900 dark:tw-bg-black tw-opacity-75"})],-1))),Mo={class:"tw-text-lg tw-font-extrabold tw-text-blue-900 dark:tw-text-white tw-mb-6 tw-text-center"},jo={class:"tw-grid tw-grid-cols-1 tw-gap-6"},Go={class:"tw-block tw-text-sm tw-font-medium tw-text-gray-500 dark:tw-text-darkGray-400 tw-mb-2"},zo={class:"tw-block tw-text-sm tw-font-medium tw-text-gray-500 dark:tw-text-darkGray-400 tw-mb-2"},Do={class:"tw-block tw-text-sm tw-font-medium tw-text-gray-500 dark:tw-text-darkGray-400 tw-mb-2"},Uo={class:"tw-mt-6 tw-flex tw-justify-center tw-flex-row-reverse"};function $o(t,e,a,s,l,r){const i=(0,o.up)("input-file"),d=(0,o.up)("contract-info");return(0,o.wg)(),(0,o.iD)("div",{class:"tw-fixed tw-z-10 tw-inset-0 tw-overflow-y-auto",onClick:e[5]||(e[5]=(...e)=>t.closeModal&&t.closeModal(...e))},[(0,o._)("div",So,[Io,(0,o._)("div",{class:"tw-inline-block tw-bg-white dark:tw-bg-darkGray-900 tw-rounded-lg tw-px-4 sm:tw-px-8 tw-py-10 tw-overflow-hidden tw-shadow-xl tw-transform tw-transition-all tw-mx-2 tw-my-2 tw-align-middle tw-max-w-lg tw-w-full",onClick:e[4]||(e[4]=(0,u.iM)((()=>{}),["stop"]))},[(0,o._)("div",null,[(0,o._)("div",null,[(0,o._)("h3",Mo,(0,n.zw)(t.$t("contracts.addExistingCodeHash")),1),(0,o._)("div",jo,[(0,o._)("div",null,[(0,o._)("label",Go,(0,n.zw)(t.$t("contracts.modals.codeBundleName")),1),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[0]||(e[0]=e=>t.bundleName=e),class:"tw-border tw-border-gray-300 dark:tw-border-darkGray-500 tw-rounded-md tw-w-full tw-text-blue-900 dark:tw-text-darkGray-100 focus:tw-outline-none tw-placeholder-gray-300 dark:tw-placeholder-darkGray-600 tw-px-3 tw-py-3 tw-appearance-none tw-bg-white dark:tw-bg-darkGray-900",placeholder:""},null,512),[[u.nr,t.bundleName]])]),(0,o._)("div",null,[(0,o._)("label",zo,(0,n.zw)(t.$t("contracts.codeHash")),1),(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.codeHash=e),class:"tw-border tw-border-gray-300 dark:tw-border-darkGray-500 tw-rounded-md tw-w-full tw-text-blue-900 dark:tw-text-darkGray-100 focus:tw-outline-none tw-placeholder-gray-300 dark:tw-placeholder-darkGray-600 tw-px-3 tw-py-3 tw-appearance-none tw-bg-white dark:tw-bg-darkGray-900",placeholder:""},null,512),[[u.nr,t.codeHash]])]),(0,o._)("div",null,[(0,o._)("label",Do,(0,n.zw)(t.$t("contracts.modals.contractAbi")),1),(0,o.Wm)(i,{file:t.wasmFromFile,extension:t.extensionFile,onDropFile:t.onDropFile},null,8,["file","extension","onDropFile"])]),(0,o.Wm)(d,{messages:t.messages},null,8,["messages"])])])]),(0,o._)("div",Uo,[(0,o._)("button",{type:"button",class:"save-button",onClick:e[2]||(e[2]=(...e)=>t.save&&t.save(...e))},(0,n.zw)(t.$t("contracts.modals.save")),1),(0,o._)("button",{type:"button",class:"cancel",onClick:e[3]||(e[3]=(...e)=>t.closeModal&&t.closeModal(...e))},(0,n.zw)(t.$t("cancel")),1)])])])])}var Oo=a(40019),Fo=function(t,e,a,o){function n(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,s){function l(t){try{i(o.next(t))}catch(e){s(e)}}function r(t){try{i(o["throw"](t))}catch(e){s(e)}}function i(t){t.done?a(t.value):n(t.value).then(l,r)}i((o=o.apply(t,e||[])).next())}))};const Ro=(0,o.aZ)({components:{InputFile:Ha.Z,ContractInfo:Ya},emits:["update:is-open"],setup(t,{emit:e}){const a=()=>{e("update:is-open",!1)},o=(0,p.useStore)(),{api:n}=(0,g.h_)(),{abi:s,onChangeAbi:l,onRemoveAbi:i}=Da(),d=(0,r.iH)(""),c=(0,r.iH)(""),{fileRef:u,setFile:w}=(0,ja.T)({onChange:l,onRemove:i,validate:t=>"0,97,115,109"===(null===t||void 0===t?void 0:t.data.subarray(0,4).toString())}),m=[".contract",".json"],v=t=>{w(t)},{messages:y}=(0,g.y_)(s),h=()=>Fo(this,void 0,void 0,(function*(){if(!d.value||!c.value||!s.value)return;const t={abi:(0,Ia.P)(s.value.json),name:c.value||"<>",tags:[]};Oo.log("codeJson",t),o.dispatch("contracts/saveCode",{api:null===n||void 0===n?void 0:n.value,_codeHash:d.value,partial:t}),a()}));return{closeModal:a,save:h,bundleName:c,codeHash:d,wasmFromFile:u,extensionFile:m,onDropFile:v,messages:y}}}),To=(0,R.Z)(Ro,[["render",$o],["__scopeId","data-v-d92e4a8e"]]),Po=To,Zo=(0,o.aZ)({components:{IconPlus:d.Z,IconBase:c.Z,ModalCreateDapps:Ao,ModalCodeHash:Po,CodehashTable:pt,ContractsTable:Xe},setup(){(0,i.Z)({title:"Deploy Contracts"});const t=(0,r.qj)({modalCreateDapps:!1,modalCodeHash:!1});return Object.assign({},(0,r.BK)(t))}}),Wo=(0,R.Z)(Zo,[["render",l],["__scopeId","data-v-20999380"]]),qo=Wo}}]);