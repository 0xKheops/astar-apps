(self["webpackChunkastar_portal"]=self["webpackChunkastar_portal"]||[]).push([[540],{83521:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>Pa});var n=a(83673),l=a(62323);const s={key:0,class:"tw-flex tw-flex-wrap tw-gap-x-12 xl:tw-gap-x-18 tw-justify-center"},o={class:"tw-text-center tw-mb-8 tw-flex tw-items-center tw-justify-center sm:tw-gap-x-4"},i={key:0,class:"sm:tw-w-40 tw-justify-center tw-inline-flex tw-items-center tw-px-6 tw-py-3 tw-border tw-border-transparent tw-text-sm tw-font-medium tw-rounded-full tw-shadow-sm tw-text-white tw-bg-indigo-500 tw-mx-1"},d={class:"store-container tw-grid tw-gap-x-12 xl:tw-gap-x-18 tw-justify-center"},r={key:0,class:"tw-text-xl tx-font-semibold tw-mt-4 dark:tw-text-darkGray-100"};function u(t,e,a,u,c,w){const p=(0,n.up)("TVL"),m=(0,n.up)("DappsCount"),k=(0,n.up)("Requirement"),v=(0,n.up)("Era"),g=(0,n.up)("Withdraw"),f=(0,n.up)("icon-plus"),h=(0,n.up)("icon-base"),b=(0,n.up)("Button"),x=(0,n.up)("q-icon"),S=(0,n.up)("Dapp"),y=(0,n.up)("ModalRegisterDapp");return(0,n.wg)(),(0,n.iD)("div",null,[t.dapps.length>0?((0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(p),(0,n.Wm)(m),(0,n.Wm)(k),(0,n.Wm)(v,{progress:t.progress,"blocks-until-next-era":t.blocksUntilNextEra,era:t.era},null,8,["progress","blocks-until-next-era","era"]),(0,n.Wm)(g)])):(0,n.kq)("",!0),(0,n._)("div",o,[(0,n.Wm)(b,{onClick:e[0]||(e[0]=e=>t.showRegisterDappModal=!0)},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{class:"tw-w-5 tw-h-5 tw-text-white tw--ml-1",stroke:"currentColor","icon-name":"plus"},{default:(0,n.w5)((()=>[(0,n.Wm)(f)])),_:1}),(0,n.Uk)(" "+(0,l.zw)(t.$t("dappStaking.registerDapp")),1)])),_:1}),t.stakerApr>0?((0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(h,{class:"tw-w-5 tw-h-5 tw-text-white tw--ml-2 tw-mr-2","icon-name":"seedling"},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{name:t.fasSeedling,color:"green"},null,8,["name"])])),_:1}),(0,n._)("div",null,(0,l.zw)(t.$t("dappStaking.stakerApr",{value:Number(t.stakerApr.toFixed(1))})),1)])):(0,n.kq)("",!0)]),(0,n._)("div",d,[0===t.dapps.length?((0,n.wg)(),(0,n.iD)("div",r,(0,l.zw)(t.$t("dappStaking.noDappsRegistered")),1)):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.dapps,((e,a)=>((0,n.wg)(),(0,n.j4)(S,{key:a,dapp:e,"staker-max-number":t.maxNumberOfStakersPerContract,"account-data":t.accountData},null,8,["dapp","staker-max-number","account-data"])))),128))]),t.showRegisterDappModal?((0,n.wg)(),(0,n.j4)(y,{key:1,"is-open":t.showRegisterDappModal,"onUpdate:is-open":e[1]||(e[1]=e=>t.showRegisterDappModal=e),"show-close-button":!1},null,8,["is-open"])):(0,n.kq)("",!0)])}var c=a(63235),w=a(55121),p=a(55502),m=a(5591);const k=t=>((0,n.dD)("data-v-8e3d3c52"),t=t(),(0,n.Cn)(),t),v={class:"tw-bg-white dark:tw-bg-darkGray-800 tw-shadow tw-mb-8 tw-w-72 tw-rounded-lg tw-text-blue-900 dark:tw-text-darkGray-100 xl:tw-mx-2"},g={class:"tw-ml-4"},f={class:"tw-text-lg tw-font-semibold tw-w-48 tw-whitespace-nowrap tw-overflow-ellipsis tw-overflow-hidden"},h={class:"tw-h-11 tw-w-48 description"},b=k((()=>(0,n._)("hr",{class:"dark:tw-bg-darkGray-600"},null,-1))),x={class:"tw-p-4"};function S(t,e,a,s,o,i){const d=(0,n.up)("Avatar"),r=(0,n.up)("StakePanel"),u=(0,n.up)("ModalDappDetails");return(0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("div",{class:"tw-flex tw-flex-grow tw-cursor-pointer tw-p-4",onClick:e[0]||(e[0]=(...e)=>t.showDappDetails&&t.showDappDetails(...e))},[(0,n.Wm)(d,{url:t.dapp.iconUrl,class:"tw-w-14 tw-h-14"},null,8,["url"]),(0,n._)("div",g,[(0,n._)("div",f,(0,l.zw)(t.dapp.name),1),(0,n._)("div",h,(0,l.zw)(t.dapp.description),1)])]),b,(0,n._)("div",x,[(0,n.Wm)(r,{dapp:t.dapp,"stake-info":t.stakeInfo,"is-max-staker":t.isMaxStaker,"staker-max-number":t.stakerMaxNumber,"account-data":t.accountData,"show-stake":t.showStakeModal,onStakeChanged:t.handleStakeChanged,onStakeModalOpened:t.handleStakeModalOpened},null,8,["dapp","stake-info","is-max-staker","staker-max-number","account-data","show-stake","onStakeChanged","onStakeModalOpened"])]),t.showDappDetailsModal?((0,n.wg)(),(0,n.j4)(u,{key:0,"is-open":t.showDappDetailsModal,"onUpdate:is-open":e[1]||(e[1]=e=>t.showDappDetailsModal=e),dapp:t.dapp,"stake-info":t.stakeInfo,onShowStake:t.showStake},null,8,["is-open","dapp","stake-info","onShowStake"])):(0,n.kq)("",!0)])}var y=a(61959),A=a(92872),_=a(71141),C=a(74115);const U={key:0,class:"tw-mb-4"},M={class:"tw-w-20"},D={class:"tw-font-semibold"},z={class:"tw-flex tw-flex-row"},W={class:"tw-w-20"},Z={class:"tw-font-semibold"},F={class:"tw-mt-1"},q={class:"tw-w-20"},I={class:"tw-relative"},j={class:"tw-absolute tw-bottom-0 tw-w-full tw-text-white tw-font-semibold"},B={class:"tw-flex tw-justify-center"},O={class:"tw-flex"},N={key:0};function H(t,e,a,s,o,i){var d,r,u,c,w,p,m,k;const v=(0,n.up)("VueJsProgress"),g=(0,n.up)("Button"),f=(0,n.up)("StakeModal"),h=(0,n.up)("ClaimRewardModal");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",null,[t.stakeInfo?((0,n.wg)(),(0,n.iD)("div",U,[(0,n._)("div",{style:(0,l.j5)({opacity:(null===(d=t.stakeInfo)||void 0===d?void 0:d.hasStake)?"1":"0"}),class:"tw-flex tw-flex-row"},[(0,n._)("div",M,(0,l.zw)(t.$t("dappStaking.yourStake")),1),(0,n._)("div",D,(0,l.zw)(null===(r=t.stakeInfo)||void 0===r?void 0:r.yourStake.formatted),1)],4),(0,n._)("div",z,[(0,n._)("div",W,(0,l.zw)(t.$t("dappStaking.totalStake")),1),(0,n._)("div",Z,(0,l.zw)(null===(u=t.stakeInfo)||void 0===u?void 0:u.totalStake),1)]),(0,n._)("div",F,[(0,n._)("div",q,(0,l.zw)(t.$t("dappStaking.stakersCount")),1),(0,n._)("div",I,[(0,n.Wm)(v,{percentage:Number(((null===(c=t.stakeInfo)||void 0===c?void 0:c.stakersCount)/t.stakerMaxNumber*100).toFixed(0)),bg:(null===(w=t.stakeInfo)||void 0===w?void 0:w.stakersCount)===t.stakerMaxNumber?"pinkglamour":"turquoise",delay:600,striped:!t.isMaxStaker,animation:!t.isMaxStaker},null,8,["percentage","bg","striped","animation"]),(0,n._)("div",j,[(0,n._)("div",B,(0,l.zw)(null===(p=t.stakeInfo)||void 0===p?void 0:p.stakersCount.toLocaleString("en-US")),1)])])])])):(0,n.kq)("",!0),(0,n._)("div",O,[(null===(m=t.stakeInfo)||void 0===m?void 0:m.hasStake)?((0,n.wg)(),(0,n.iD)("div",N,[(0,n.Wm)(g,{small:!0,primary:!0,onClick:t.showStakeModal},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.$t("dappStaking.add")),1)])),_:1},8,["onClick"]),(0,n.Wm)(g,{small:!0,primary:!1,onClick:t.showUnstakeModal},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.canUnbondWithdraw?t.$t("dappStaking.unbond"):t.$t("dappStaking.unstake")),1)])),_:1},8,["onClick"])])):((0,n.wg)(),(0,n.j4)(g,{key:1,small:!0,disabled:t.isMaxStaker||t.isH160||null===t.currentAddress,onClick:t.showStakeModal},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.$t("dappStaking.stake")),1)])),_:1},8,["disabled","onClick"])),(0,n.Wm)(g,{small:!0,primary:!0,disabled:t.isH160||null===t.currentAddress,class:"tw-ml-auto",onClick:e[0]||(e[0]=e=>t.showClaimRewardModal=!0)},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.$t("dappStaking.claim")),1)])),_:1},8,["disabled"])])]),t.showModal?((0,n.wg)(),(0,n.j4)(f,{key:0,isOpen:t.showModal,"onUpdate:isOpen":e[1]||(e[1]=e=>t.showModal=e),dapp:t.dapp,action:t.modalAction,"action-name":t.modalActionName,title:t.modalTitle,"min-staking":t.formattedMinStake,"stake-amount":null===(k=t.stakeInfo)||void 0===k?void 0:k.yourStake.denomAmount,"account-data":t.accountData},null,8,["isOpen","dapp","action","action-name","title","min-staking","stake-amount","account-data"])):(0,n.kq)("",!0),t.dapp&&t.showClaimRewardModal?((0,n.wg)(),(0,n.j4)(h,{key:1,isOpen:t.showClaimRewardModal,"onUpdate:isOpen":e[2]||(e[2]=e=>t.showClaimRewardModal=e),dapp:t.dapp,"stake-info":t.stakeInfo,"claim-action":t.claim},null,8,["isOpen","dapp","stake-info","claim-action"])):(0,n.kq)("",!0)])}var R=a(18989);const G={key:0,class:"tw-mt-4"},$={class:"tw-w-52 tw-inline-block"},P={class:"tw-font-semibold"},E={key:1,class:"tw-mt-2"},K={class:"tw-w-52 tw-inline-block"},V={class:"tw-font-semibold"},Q={class:"tw-mt-2"},T={class:"tw-w-52 tw-inline-block"},Y={class:"tw-font-semibold tw-w-16 tw-text-rigth"},J={key:2,class:"tw-mt-2"},L={class:"tw-w-52 tw-inline-block"},X={class:"tw-font-semibold tw-w-16 tw-text-rigth"},tt={class:"tw-mt-2"},et={class:"tw-w-52 tw-inline-block"},at={class:"tw-font-semibold tw-w-16 tw-text-rigth"},nt={key:3,class:"tw-mt-4"},lt={class:"tw-mt-6 tw-flex tw-justify-center tw-flex-row"};function st(t,e,a,s,o,i){const d=(0,n.up)("Avatar"),r=(0,n.up)("Button"),u=(0,n.up)("Modal");return(0,n.wg)(),(0,n.j4)(u,{title:`Claim reward ${t.dapp.name}`,onClick:t.closeModal},{content:(0,n.w5)((()=>{var a,s,o,i;return[(0,n.Wm)(d,{url:t.dapp.iconUrl,class:"tw-w-36 tw-h-36 tw-mb-4 tw-mx-auto"},null,8,["url"]),(null===(a=t.stakeInfo)||void 0===a?void 0:a.totalStake)?((0,n.wg)(),(0,n.iD)("div",G,[(0,n._)("span",$,(0,l.zw)(t.$t("dappStaking.totalStake")),1),(0,n._)("span",P,(0,l.zw)(t.stakeInfo.totalStake),1)])):(0,n.kq)("",!0),(null===(s=t.stakeInfo)||void 0===s?void 0:s.yourStake)?((0,n.wg)(),(0,n.iD)("div",E,[(0,n._)("span",K,(0,l.zw)(t.$t("dappStaking.yourStake")),1),(0,n._)("span",V,(0,l.zw)(t.stakeInfo.yourStake.formatted),1)])):(0,n.kq)("",!0),(0,n._)("div",Q,[(0,n._)("span",T,(0,l.zw)(t.$t("dappStaking.modals.estimatedRewards")),1),(0,n._)("span",Y,(0,l.zw)(t.pendingRewards),1)]),t.claimedRewards>0?((0,n.wg)(),(0,n.iD)("div",J,[(0,n._)("span",L,(0,l.zw)(t.$t("dappStaking.modals.estimatedClaimedRewards")),1),(0,n._)("span",X,(0,l.zw)(t.claimedRewards),1)])):(0,n.kq)("",!0),(0,n._)("div",tt,[(0,n._)("span",et,(0,l.zw)(t.$t("dappStaking.modals.unclaimedEras")),1),(0,n._)("span",at,(0,l.zw)(null===(i=null===(o=t.claimInfo)||void 0===o?void 0:o.unclaimedEras)||void 0===i?void 0:i.length),1)]),t.stepsCount>1?((0,n.wg)(),(0,n.iD)("div",nt,(0,l.zw)(t.$t("dappStaking.modals.multipleClaimInfo",{steps:t.stepsCount})),1)):(0,n.kq)("",!0),(0,n._)("div",lt,[(0,n.Wm)(r,{type:"button",primary:!1,onClick:t.closeModal},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.$t("close")),1)])),_:1},8,["onClick"]),(0,n.Wm)(r,{disabled:!t.canClaim,class:"tw-tooltip",onClick:e[0]||(e[0]=e=>t.claim())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.$t("dappStaking.claim")),1)])),_:1},8,["disabled"])])]})),_:1},8,["title","onClick"])}var ot=a(13233),it=a(89497),dt=a(40019),rt=function(t,e,a,n){function l(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,s){function o(t){try{d(n.next(t))}catch(e){s(e)}}function i(t){try{d(n["throw"](t))}catch(e){s(e)}}function d(t){t.done?a(t.value):l(t.value).then(o,i)}d((n=n.apply(t,e||[])).next())}))};const ut=(0,n.aZ)({components:{Modal:ot.Z,Button:c.Z,Avatar:C.Z},props:{dapp:{type:Object,required:!0},claimAction:{type:Function,required:!0},stakeInfo:{type:Object,required:!0}},emits:["update:is-open"],setup(t,{emit:e}){const a=15,{api:l}=(0,_.h_)(),s=(0,A.useStore)(),{decimal:o}=(0,_.SG)(),i=(0,y.iH)(),d=(0,y.iH)(""),r=(0,y.iH)(""),u=s.getters["general/selectedAddress"],c=(0,y.iH)(1),w=(0,y.Fl)((()=>s.getters["general/substrateAccounts"])),p=(0,y.Fl)((()=>(null===i||void 0===i?void 0:i.value)&&i.value.unclaimedEras.length>0));(0,n.bv)((()=>rt(this,void 0,void 0,(function*(){yield m()}))));const m=()=>rt(this,void 0,void 0,(function*(){i.value=yield s.dispatch("dapps/getClaimInfo",{api:null===l||void 0===l?void 0:l.value,senderAddress:u,dapp:t.dapp,decimals:o.value,substrateAccounts:w.value}),i.value&&(d.value=(0,it.DE)(i.value.rewards.toString()),r.value=(0,it.DE)(i.value.estimatedClaimedRewards.toString()),c.value=Math.ceil(i.value.unclaimedEras.length/a))})),k=()=>{e("update:is-open",!1)},v=()=>rt(this,void 0,void 0,(function*(){var e;const n=null===(e=i.value)||void 0===e?void 0:e.unclaimedEras.sort().slice(0,a);dt.log("Eras to claim in batch",n),yield t.claimAction(n,m)}));return Object.assign({pendingRewards:d,claimedRewards:r,claimInfo:i,canClaim:p,closeModal:k,stepsCount:c,claim:v},(0,y.BK)(t))}});var ct=a(74260);const wt=(0,ct.Z)(ut,[["render",st]]),pt=wt,mt={class:"tw-mb-4"},kt={class:"tw-block tw-text-sm tw-font-medium tw-text-gray-500 dark:tw-text-darkGray-400 tw-mb-2"},vt={key:0,class:"tw-mt-1 tw-ml-1"},gt={key:1,class:"tw-mt-1 tw-ml-1"},ft={key:2,class:"tw-mt-4 tw-ml-1"},ht={key:3,class:"tw-mt-1 tw-ml-1 tw-text-red-700"},bt={class:"tw-mt-6 tw-flex tw-justify-center tw-flex-row"};function xt(t,e,a,s,o,i){const d=(0,n.up)("Avatar"),r=(0,n.up)("modal-select-account"),u=(0,n.up)("InputAmount"),c=(0,n.up)("format-balance"),w=(0,n.up)("Button"),p=(0,n.up)("Modal");return(0,n.wg)(),(0,n.j4)(p,{title:t.title,onClick:t.closeModal},{content:(0,n.w5)((()=>{var a,s;return[(0,n.Wm)(d,{url:t.dapp.iconUrl,class:"tw-w-36 tw-h-36 tw-mb-4 tw-mx-auto"},null,8,["url"]),(0,n._)("div",mt,[(0,n._)("label",kt,(0,l.zw)(t.$t("dappStaking.modals.address")),1),(0,n.Wm)(r,{selAddress:t.data.address,"onUpdate:selAddress":e[0]||(e[0]=e=>t.data.address=e),role:t.Role.FromAddress,onSelChanged:t.reloadAmount},null,8,["selAddress","role","onSelChanged"])]),(0,n.Wm)(u,{amount:t.data.amount,"onUpdate:amount":e[1]||(e[1]=e=>t.data.amount=e),selectedUnit:t.data.unit,"onUpdate:selectedUnit":e[2]||(e[2]=e=>t.data.unit=e),title:"Amount","max-in-default-unit":t.actionName===t.StakeAction.Unstake?t.formatStakeAmount:null===(a=t.accountData)||void 0===a?void 0:a.getUsableFeeBalance(),"is-max-button":t.actionName===t.StakeAction.Unstake},null,8,["amount","selectedUnit","max-in-default-unit","is-max-button"]),t.accountData&&t.actionName===t.StakeAction.Stake?((0,n.wg)(),(0,n.iD)("div",vt,[(0,n.Uk)((0,l.zw)(t.$t("dappStaking.modals.availableToStake"))+" ",1),(0,n.Wm)(c,{balance:null===(s=t.accountData)||void 0===s?void 0:s.getUsableFeeBalance(),class:"tw-inline tw-font-semibold"},null,8,["balance"])])):(0,n.kq)("",!0),t.accountData&&t.actionName===t.StakeAction.Unstake?((0,n.wg)(),(0,n.iD)("div",gt,[(0,n.Uk)((0,l.zw)(t.$t("dappStaking.yourStake"))+" ",1),(0,n.Wm)(c,{balance:t.stakeAmount,class:"tw-inline tw-font-semibold"},null,8,["balance"])])):(0,n.kq)("",!0),t.actionName===t.StakeAction.Unstake&&t.canUnbondWithdraw?((0,n.wg)(),(0,n.iD)("div",ft,(0,l.zw)(t.$t("dappStaking.modals.unbondingInfo",{era:t.unbondingPeriod})),1)):(0,n.kq)("",!0),t.isMaxChunks&&t.actionName===t.StakeAction.Unstake&&t.canUnbondWithdraw?((0,n.wg)(),(0,n.iD)("div",ht,(0,l.zw)(t.$t("dappStaking.maxChunksWarning",{chunks:t.maxUnlockingChunks})),1)):(0,n.kq)("",!0),(0,n._)("div",bt,[(0,n.Wm)(w,{type:"button",primary:!1,onClick:t.closeModal},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.$t("close")),1)])),_:1},8,["onClick"]),(0,n.Wm)(w,{disabled:!t.canExecuteAction,onClick:e[3]||(e[3]=e=>t.action(t.data))},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.actionName),1)])),_:1},8,["disabled"])])]})),_:1},8,["title","onClick"])}var St=a(76250),yt=a.n(St),At=a(48393),_t=a(53294),Ct=a(77553),Ut=a(72723),Mt=a(23822);const Dt=(t,e)=>{const a=(0,Mt.Wy)(e),{decimal:n}=(0,_.SG)();return(0,it.VB)(t,a,n.value)},zt=(0,n.aZ)({components:{Modal:ot.Z,ModalSelectAccount:_t.Z,InputAmount:Ut.Z,Button:c.Z,Avatar:C.Z,FormatBalance:At.Z},props:{dapp:{type:Object,required:!0},accountData:{type:Object,required:!0},title:{type:String,required:!0},action:{type:Function,required:!0},actionName:{type:String,required:!0},minStaking:{type:String,required:!0},stakeAmount:{type:yt(),required:!0}},emits:["update:is-open"],setup(t,{emit:e}){const a=(0,A.useStore)(),{decimal:n,defaultUnitToken:l}=(0,_.SG)(),s=(0,y.iH)({address:"",amount:t.actionName===Nt.Stake?Number(t.minStaking):0,unit:l.value,decimal:n.value}),o=(0,y.Fl)((()=>a.getters["dapps/getMaxUnlockingChunks"])),i=(0,y.Fl)((()=>a.getters["dapps/getUnlockingChunks"])),d=(0,y.Fl)((()=>a.getters["dapps/getUnbondingPeriod"])),r=i.value>=o.value,{api:u}=(0,_.h_)(),{canUnbondWithdraw:c}=(0,_.vK)(u),w=(0,y.Fl)((()=>it.zm(t.stakeAmount,n.value))),p=(0,y.Fl)((()=>{if(s.value){const e=Dt(s.value.amount,s.value.unit),a=t.accountData.getUsableFeeBalance();let n=t.actionName===Nt.Stake?e.lt(a)&&e.gtn(0):e.lte(t.stakeAmount)&&e.gtn(0);return c.value&&(n=n&&!(t.actionName===Nt.Unstake&&r)),n}return!1})),m=t=>{a.commit("general/setCurrentAddress",t)},k=()=>{e("update:is-open",!1)};return Object.assign({data:s,formatStakeAmount:w,reloadAmount:m,StakeAction:Nt,canExecuteAction:p,isMaxChunks:r,maxUnlockingChunks:o,unbondingPeriod:d,canUnbondWithdraw:c,closeModal:k,Role:Ct.u},(0,y.BK)(t))}}),Wt=(0,ct.Z)(zt,[["render",xt]]),Zt=Wt;var Ft=a(41146),qt=a(32267),It=a(19699),jt=a(40019),Bt=function(t,e,a,n){function l(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,s){function o(t){try{d(n.next(t))}catch(e){s(e)}}function i(t){try{d(n["throw"](t))}catch(e){s(e)}}function d(t){t.done?a(t.value):l(t.value).then(o,i)}d((n=n.apply(t,e||[])).next())}))};const Ot=(0,n.aZ)({components:{Button:c.Z,StakeModal:Zt,ClaimRewardModal:pt,VueJsProgress:It.Z},props:{dapp:{type:Object,required:!0},accountData:{type:Object,required:!0},stakeInfo:{type:Object,default:void 0},isMaxStaker:{type:Boolean,default:!1},stakerMaxNumber:{type:Number,default:0},showStake:{type:Boolean,default:!1}},emits:["stakeChanged","stakeModalOpened"],setup(t,{emit:e}){const a=(0,A.useStore)(),{api:l}=(0,_.h_)(),s=(0,y.iH)(!1),o=(0,y.iH)(!1),i=(0,y.iH)(""),d=(0,y.iH)(""),r=(0,y.iH)(""),u=(0,y.iH)(),{minStaking:c}=(0,_.ZW)(l),{decimal:w}=(0,_.SG)(),{canUnbondWithdraw:p}=(0,Ft.v)(l),m=(0,y.Fl)((()=>a.getters["general/isH160Formatted"])),{callFunc:k,dispatchError:v,isCustomSig:g,customMsg:f}=(0,_._0)(),h=(0,y.Fl)((()=>a.getters["general/selectedAddress"])),b=(0,y.Fl)((()=>a.getters["general/substrateAccounts"])),x=()=>{i.value=`Stake on ${t.dapp.name}`,d.value=Nt.Stake,u.value=U,s.value=!0,e("stakeModalOpened")},S=()=>{i.value=p.value?`Start unbonbonding from ${t.dapp.name}`:`Unstake from ${t.dapp.name}`,d.value=Nt.Unstake,u.value=M,s.value=!0,e("stakeModalOpened")};(0,n.m0)((()=>{var e,a;const n=it.zm(c.value,w.value),l=(null===(e=t.stakeInfo)||void 0===e?void 0:e.yourStake.denomAmount)&&it.zm(null===(a=t.stakeInfo)||void 0===a?void 0:a.yourStake.denomAmount,w.value);r.value=Number(l)>=Number(n)?"0":n,t.showStake&&x()}));const C=()=>{e("stakeChanged",t.dapp)},U=e=>Bt(this,void 0,void 0,(function*(){const n=Dt(e.amount,e.unit),o=e.unit,i=()=>Bt(this,void 0,void 0,(function*(){var a;try{const s=(0,R.a)(n,{withSi:!0,decimals:e.decimal,withUnit:o});f.value=`You staked ${s} on ${t.dapp.name}.`;const i=null===(a=null===l||void 0===l?void 0:l.value)||void 0===a?void 0:a.tx.dappsStaking.bondAndStake,d=i&&i((0,qt.U)(t.dapp.address),n);d&&(yield k(d)),C()}catch(s){v(s.message)}}));if(t.stakeInfo){const e=n.add(t.stakeInfo.yourStake.denomAmount);if(e.lt(c.value))return void a.dispatch("general/showAlertMsg",{msg:`The amount of token to be staking must greater than ${r.value} ${o}`,alertType:"error"})}else jt.warn("No stakeInfo available. The store is unable to check some constraints.");if(g.value)yield i(),s.value=!1;else{const i=yield a.dispatch("dapps/stake",{api:null===l||void 0===l?void 0:l.value,senderAddress:e.address,dapp:t.dapp,amount:n,decimals:e.decimal,unit:o,finalizeCallback:C,substrateAccounts:b.value});i&&(s.value=!1)}})),M=e=>Bt(this,void 0,void 0,(function*(){const n=p.value?"dapps/unbond":"dapps/unstake",o=Dt(e.amount,e.unit),i=()=>Bt(this,void 0,void 0,(function*(){var n;try{const s=(0,R.a)(o,{withSi:!0,decimals:e.decimal,withUnit:e.unit});f.value=`You unstaked ${s} on ${t.dapp.name}.`;const i=null===(n=null===l||void 0===l?void 0:l.value)||void 0===n?void 0:n.tx.dappsStaking.unbondUnstakeAndWithdraw,d=i&&i((0,qt.U)(t.dapp.address),o);d&&(yield k(d)),a.commit("setUnlockingChunks",-1),C()}catch(s){v(s.message)}}));if(g.value)yield i(),s.value=!1;else{const i=yield a.dispatch(n,{api:null===l||void 0===l?void 0:l.value,senderAddress:e.address,dapp:t.dapp,amount:o,decimals:e.decimal,unit:e.unit,finalizeCallback:C,substrateAccounts:b.value});i&&(s.value=!1)}})),D=(e,n)=>Bt(this,void 0,void 0,(function*(){const s=a.getters["general/selectedAddress"],o=()=>Bt(this,void 0,void 0,(function*(){var n,s;const o=e;if(0===o.length)return a.dispatch("general/showAlertMsg",{msg:"All rewards have been already claimed.",alertType:"warning"},{root:!0}),!0;try{const e=[];for(let s of o)e.push(null===(n=null===l||void 0===l?void 0:l.value)||void 0===n?void 0:n.tx.dappsStaking.claim((0,qt.U)(t.dapp.address),s));f.value="All rewards have been already claimed.";const a=null===(s=null===l||void 0===l?void 0:l.value)||void 0===s?void 0:s.tx.utility.batch,i=a&&a(e);i&&(yield k(i)),C()}catch(i){v(i.message)}}));g.value?yield o():yield a.dispatch("dapps/claimBatch",{api:null===l||void 0===l?void 0:l.value,senderAddress:s,dapp:t.dapp,substrateAccounts:b.value,finalizeCallback:function(){C(),n()},unclaimedEras:e})}));return Object.assign(Object.assign({},(0,y.BK)(t)),{showModal:s,showClaimRewardModal:o,modalTitle:i,modalAction:u,modalActionName:d,showStakeModal:x,showUnstakeModal:S,claim:D,formattedMinStake:r,unstake:M,canUnbondWithdraw:p,isH160:m,currentAddress:h})}});var Nt;(function(t){t["Stake"]="Stake",t["Unstake"]="Start unbonding"})(Nt||(Nt={}));const Ht=(0,ct.Z)(Ot,[["render",H]]),Rt=Ht;var Gt=a(17323),$t=a.n(Gt);const Pt=t=>((0,n.dD)("data-v-c20a8f2c"),t=t(),(0,n.Cn)(),t),Et={class:"tw-flex tw-flex-row tw-flex-wrap"},Kt={class:"tw-w-auto dark:tw-text-darkGray-100"},Vt={class:"tw-flex tw-flex-col tw-items-center"},Qt={class:"tw-flex tw-flex-col tw-items-center tw-py-4"},Tt={class:"tw-my-2 tw-text-2xl tw-font-semibold"},Yt=["href"],Jt=Pt((()=>(0,n._)("img",{width:"20",class:"tw-inline tw-ml-2",src:$t()},null,-1))),Lt=[Jt],Xt={class:"tw-flex tw-flex-wrap tw-w-full tw-m-2"},te={key:1,class:"tw-w-full tw-m-2"},ee={class:"tw-mt-6 tw-flex tw-justify-center"},ae=["href"];function ne(t,e,a,s,o,i){const d=(0,n.up)("q-video"),r=(0,n.up)("q-carousel-slide"),u=(0,n.up)("q-btn"),c=(0,n.up)("q-carousel-control"),w=(0,n.up)("q-carousel"),p=(0,n.up)("q-card"),m=(0,n.up)("Avatar"),k=(0,n.up)("q-separator"),v=(0,n.up)("NameValue"),g=(0,n.up)("q-chip"),f=(0,n.up)("q-markdown"),h=(0,n.up)("q-scroll-area"),b=(0,n.up)("Button"),x=(0,n.up)("Modal");return(0,n.wg)(),(0,n.j4)(x,{onClick:t.closeModal},{content:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n._)("div",Et,[t.dapp.videoUrl?((0,n.wg)(),(0,n.j4)(p,{key:0,class:"tw-w-96 md:tw-mr-4"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{fullscreen:t.isFullScreen,"onUpdate:fullscreen":e[2]||(e[2]=e=>t.isFullScreen=e),modelValue:t.slide,"onUpdate:modelValue":e[3]||(e[3]=e=>t.slide=e),class:"ounded-borders tw-h-96",swipeable:"",animated:"",navigation:"",arrows:"",infinite:""},{control:(0,n.w5)((()=>[(0,n.Wm)(c,{position:"bottom-right",offset:[18,18]},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{push:"",round:"",dense:"",color:"white","text-color":"primary",icon:t.isFullScreen?"fullscreen_exit":"fullscreen",onClick:e[1]||(e[1]=e=>t.isFullScreen=!t.isFullScreen)},null,8,["icon"])])),_:1})])),default:(0,n.w5)((()=>[(0,n.Wm)(r,{fullscreen:t.isFullScreen,"onUpdate:fullscreen":e[0]||(e[0]=e=>t.isFullScreen=e),name:"video"},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{src:t.dapp.videoUrl,name:"video",class:"absolute-full"},null,8,["src"])])),_:1},8,["fullscreen"]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.dapp.imagesUrl,((t,e)=>((0,n.wg)(),(0,n.j4)(r,{key:e,"img-src":t,name:e.toString()},null,8,["img-src","name"])))),128))])),_:1},8,["fullscreen","modelValue"])])),_:1})):(0,n.kq)("",!0),(0,n._)("div",Kt,[(0,n._)("div",Vt,[(0,n.Wm)(p,{class:"bg-auto tw-h-96"},{default:(0,n.w5)((()=>[(0,n._)("div",Qt,[(0,n.Wm)(m,{url:t.dapp.iconUrl,class:"tw-w-24 tw-h-24 tw-mt-4"},null,8,["url"]),(0,n._)("div",Tt,[(0,n.Uk)((0,l.zw)(t.dapp.name)+" ",1),t.dapp.gitHubUrl?((0,n.wg)(),(0,n.iD)("a",{key:0,href:t.dapp.gitHubUrl,target:"_blank"},Lt,8,Yt)):(0,n.kq)("",!0)])]),(0,n.Wm)(k),(0,n._)("div",Xt,[t.dapp.license?((0,n.wg)(),(0,n.j4)(v,{key:0,label:"License",class:"info"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.dapp.license),1)])),_:1})):(0,n.kq)("",!0),(0,n.Wm)(v,{label:"Stakers count",class:"info"},{default:(0,n.w5)((()=>{var e;return[(0,n.Uk)((0,l.zw)(null===(e=t.stakeInfo)||void 0===e?void 0:e.stakersCount),1)]})),_:1}),(0,n.Wm)(v,{label:"Address",class:"info"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.getShortenAddress(t.dapp.address)),1)])),_:1}),(0,n.Wm)(v,{label:"Staked",class:"info"},{default:(0,n.w5)((()=>{var e;return[(0,n.Uk)((0,l.zw)(null===(e=t.stakeInfo)||void 0===e?void 0:e.totalStake),1)]})),_:1})]),t.dapp.tags?((0,n.wg)(),(0,n.j4)(k,{key:0})):(0,n.kq)("",!0),t.dapp.tags?((0,n.wg)(),(0,n.iD)("div",te,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.dapp.tags,((t,e)=>((0,n.wg)(),(0,n.j4)(g,{key:e,color:"blue",class:"tw-text-white"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t),1)])),_:2},1024)))),128))])):(0,n.kq)("",!0)])),_:1})])])]),(0,n.Wm)(p,{class:"tw-mt-4"},{default:(0,n.w5)((()=>[(0,n.Wm)(h,{class:"scroll"},{default:(0,n.w5)((()=>[(0,n.Wm)(f,{src:t.dapp.description,"no-html":!0,class:"tw-m-2"},null,8,["src"])])),_:1})])),_:1})]),(0,n._)("div",ee,[(0,n.Wm)(b,{type:"button",primary:!1,onClick:t.closeModal},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.$t("close")),1)])),_:1},8,["onClick"]),(0,n._)("a",{href:t.dapp.url,target:"_blank"},[(0,n.Wm)(b,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.$t("dappStaking.modals.viewProject")),1)])),_:1})],8,ae),(0,n.Wm)(b,{onClick:t.showStakeModal},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.$t("dappStaking.stake")),1)])),_:1},8,["onClick"])])])),_:1},8,["onClick"])}var le=a(43886);const se={class:"container tw-w-full"},oe={class:"item"},ie={class:"item"};function de(t,e,a,s,o,i){return(0,n.wg)(),(0,n.iD)("div",se,[(0,n._)("div",oe,(0,l.zw)(t.label),1),(0,n._)("div",ie,[(0,n.WI)(t.$slots,"default",{},void 0,!0)])])}const re=(0,n.aZ)({props:{label:{type:String,required:!0}},setup(t){return Object.assign({},(0,y.BK)(t))}}),ue=(0,ct.Z)(re,[["render",de],["__scopeId","data-v-7377e85d"]]),ce=ue,we=(0,n.aZ)({components:{Modal:ot.Z,Avatar:C.Z,Button:c.Z,NameValue:ce},props:{dapp:{type:Object,required:!0},stakeInfo:{type:Object,required:!0}},emits:["update:is-open","showStake"],setup(t,{emit:e}){const a=(0,y.iH)("video"),n=(0,y.iH)(!1),l=()=>{e("update:is-open",!1),e("showStake")},s=()=>{e("update:is-open",!1)};return Object.assign(Object.assign({slide:a,isFullScreen:n},(0,y.BK)(t)),{getShortenAddress:le.L,showStakeModal:l,closeModal:s})}});var pe=a(10151),me=a(95845),ke=a(34593),ve=a(1419),ge=a(47607),fe=a(48240),he=a(65869),be=a(67030),xe=a(70820),Se=a(7518),ye=a.n(Se);const Ae=(0,ct.Z)(we,[["render",ne],["__scopeId","data-v-c20a8f2c"]]),_e=Ae;ye()(we,"components",{QCard:pe.Z,QCarousel:me.Z,QCarouselSlide:ke.Z,QVideo:ve.Z,QCarouselControl:ge.Z,QBtn:fe.Z,QSeparator:he.Z,QChip:be.Z,QScrollArea:xe.Z});var Ce=a(40019);const Ue=(0,n.aZ)({components:{Avatar:C.Z,StakePanel:Rt,ModalDappDetails:_e},props:{dapp:{type:Object,required:!0},accountData:{type:Object,required:!0},stakerMaxNumber:{type:Number,default:0}},emits:["dappClick"],setup(t,{emit:e}){const a=(0,A.useStore)(),{api:l}=(0,_.h_)(),s=(0,y.iH)(),o=(0,y.Fl)((()=>a.getters["general/selectedAddress"])),i=(0,y.iH)(!1),d=(0,y.iH)(!1),r=(0,y.iH)(!1),u=(0,y.Fl)((()=>a.getters["general/substrateAccounts"])),c=(0,y.Fl)((()=>a.getters["general/isEthWallet"])),w=(0,y.Fl)((()=>a.getters["general/isLoading"])),p=()=>{d.value=!0},m=()=>{k()},k=()=>{a.dispatch("dapps/getStakeInfo",{api:null===l||void 0===l?void 0:l.value,senderAddress:o.value,dapp:t.dapp,substrateAccounts:u.value}).then((e=>{e&&(s.value=e,i.value=e.stakersCount===t.stakerMaxNumber)}))};(0,n.YP)(o,(()=>{k()})),(0,n.YP)([w],(()=>{c.value&&!w.value&&k()}),{immediate:!1});const v=()=>{Ce.log("show stake"),r.value=!0},g=()=>{r.value=!1};return o.value&&k(),Object.assign(Object.assign({},(0,y.BK)(t)),{stakeInfo:s,showDappDetails:p,handleStakeChanged:m,isMaxStaker:i,showDappDetailsModal:d,showStake:v,showStakeModal:r,handleStakeModalOpened:g})}}),Me=(0,ct.Z)(Ue,[["render",S],["__scopeId","data-v-8e3d3c52"]]),De=Me,ze={class:"tw-bg-white dark:tw-bg-darkGray-800 tw-mb-8 tw-w-72 tw-rounded-lg tw-text-white dark:tw-text-darkGray-100 tw-py-4 tw-pb-8 tw-px-4 box xl:tw-mx-2"},We={class:"tw-text-xl tw-font-semibold tw-mb-4"},Ze={class:"tw-flex tw-flex-col tw-items-center"},Fe={key:0,class:"tw-flex tw-text-xl tw-font-bold"},qe={class:"tw-ml-1"};function Ie(t,e,a,s,o,i){const d=(0,n.up)("format-balance");return(0,n.wg)(),(0,n.iD)("div",ze,[(0,n._)("div",We,(0,l.zw)(t.$t("dappStaking.tvl")),1),(0,n._)("div",Ze,[(0,n._)("div",{class:(0,l.C_)(["tw-font-bold",0===t.tvlUsd?"tw-text-2xl tw-pt-1":"tw-text-xl"])},[(0,n.Wm)(d,{balance:t.tvlToken},null,8,["balance"])],2),0!==t.tvlUsd?((0,n.wg)(),(0,n.iD)("div",Fe,[(0,n._)("div",null,"$"+(0,l.zw)(t.numFormatter(t.tvlUsd)),1),(0,n._)("div",qe,(0,l.zw)(t.$t("usd")),1)])):(0,n.kq)("",!0)])])}var je=a(68072);const Be=(0,n.aZ)({components:{FormatBalance:At.Z},setup(){const{api:t}=(0,_.h_)(),{tvlToken:e,tvlUsd:a}=(0,_.jT)(t);return{tvlToken:e,tvlUsd:a,numFormatter:je.t}}}),Oe=(0,ct.Z)(Be,[["render",Ie],["__scopeId","data-v-e2a3e1d2"]]),Ne=Oe,He={class:"tw-bg-white dark:tw-bg-darkGray-800 tw-shadow tw-mb-8 tw-w-72 tw-rounded-lg tw-text-white dark:tw-text-darkGray-100 tw-py-4 tw-pb-8 tw-px-4 box xl:tw-mx-2"},Re={class:"tw-text-xl tw-font-semibold tw-mb-4"},Ge={class:"tw-flex tw-flex-col tw-items-center"},$e={class:"tw-text-5xl tw-font-semibold"};function Pe(t,e,a,s,o,i){const d=(0,n.up)("vue3-autocounter");return(0,n.wg)(),(0,n.iD)("div",He,[(0,n._)("div",Re,(0,l.zw)(t.$t("dappStaking.dappsCount")),1),(0,n._)("div",Ge,[(0,n._)("div",$e,[(0,n.Wm)(d,{ref:"counter-dapps",duration:2,"end-amount":t.dappsCount,autoinit:t.dappsCount>0},null,8,["end-amount","autoinit"])])])])}var Ee=a(57281);const Ke=(0,n.aZ)({components:{"vue3-autocounter":Ee.Z},setup(){const t=(0,A.useStore)(),e=(0,y.Fl)((()=>t.getters["dapps/getAllDapps"])),a=e.value.length;return{dappsCount:a}}}),Ve=(0,ct.Z)(Ke,[["render",Pe],["__scopeId","data-v-607ef1fe"]]),Qe=Ve,Te={class:"lg:tw-hidden tw-bg-white dark:tw-bg-darkGray-800 tw-shadow tw-mb-8 tw-w-72 tw-rounded-lg tw-text-white dark:tw-text-darkGray-100 tw-px-4 tw-pb-4 box"},Ye={class:"tw-text-xl tw-font-semibold tw-mb-1 tw-pt-4"},Je={class:"tw-flex tw-flex-col tw-items-center"},Le={class:"tw-text-lg tw-font-semibold tw-text-center"};function Xe(t,e,a,s,o,i){return(0,n.wg)(),(0,n.iD)("div",Te,[(0,n._)("div",Ye,(0,l.zw)(t.$t("dappStaking.requirement")),1),(0,n._)("div",Je,[(0,n._)("div",Le,(0,l.zw)(t.$t("dappStaking.warning",{amount:t.minimumStakingAmount,stakers:t.maxNumberOfStakersPerContract.toLocaleString("en-US")})),1)])])}const ta=(0,n.aZ)({setup(){const t=(0,A.useStore)(),e=(0,y.Fl)((()=>t.getters["dapps/getMaxNumberOfStakersPerContract"])),a=(0,y.Fl)((()=>{const e=t.getters["dapps/getMinimumStakingAmount"];return(0,it.X1)(e)}));return{maxNumberOfStakersPerContract:e,minimumStakingAmount:a}}}),ea=(0,ct.Z)(ta,[["render",Xe],["__scopeId","data-v-16b96a27"]]),aa=ea,na={key:0,class:"tw-bg-white dark:tw-bg-darkGray-800 tw-mb-8 tw-w-72 tw-rounded-lg tw-text-white dark:tw-text-darkGray-100 xl:tw-mx-2 tw-py-4 tw-pb-8 tw-px-4 box"},la={class:"tw-text-xl tw-font-semibold tw-mb-4 tw-uppercase"},sa={class:"tw-flex tw-flex-col tw-items-center"},oa={class:"tw-flex tw-flex-row tw-items-baseline tw-float-right"};function ia(t,e,a,s,o,i){var d;const r=(0,n.up)("FormatBalance"),u=(0,n.up)("Button"),c=(0,n.up)("ChunksModal");return t.canUnbondWithdraw?((0,n.wg)(),(0,n.iD)("div",na,[(0,n._)("div",la,(0,l.zw)(t.$t("dappStaking.unbondedFunds")),1),(0,n._)("div",sa,[(0,n.Wm)(r,{balance:t.totalToWithdraw,class:"tw-flex tw-text-2xl tw-font-bold"},null,8,["balance"])]),(0,n._)("div",oa,[(0,n._)("div",{class:"tw-cursor-pointer tw-mr-4",onClick:e[0]||(e[0]=e=>t.showModal=!0)},(0,l.zw)(t.$t("dappStaking.chunks"))+" ("+(0,l.zw)(null===(d=t.unlockingChunks)||void 0===d?void 0:d.length)+") ",1),t.canWithdraw?((0,n.wg)(),(0,n.j4)(u,{key:0,primary:!1,class:"tw-mt-4",onClick:e[1]||(e[1]=e=>t.withdraw())},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.$t("dappStaking.withdraw")),1)])),_:1})):(0,n.kq)("",!0)]),t.showModal?((0,n.wg)(),(0,n.j4)(c,{key:0,isOpen:t.showModal,"onUpdate:isOpen":e[2]||(e[2]=e=>t.showModal=e),"unlocking-chunks":t.unlockingChunks,"max-unlocking-chunks":t.maxUnlockingChunks},null,8,["isOpen","unlocking-chunks","max-unlocking-chunks"])):(0,n.kq)("",!0)])):(0,n.kq)("",!0)}const da={class:"tw-my-4"},ra=(0,n._)("br",null,null,-1),ua={key:0,class:"tw-grid tw-grid-cols-12"},ca={class:"tw-col-span-1"},wa={class:"tw-col-span-5 tw-text-right"},pa={class:"tw-col-span-6 tw-text-right"},ma={class:"tw-col-span-1"},ka={class:"tw-col-span-5 tw-text-right tw-font-semibold"},va={class:"tw-col-span-6 tw-text-right"},ga={class:"tw-mt-6 tw-flex tw-justify-center tw-flex-row"};function fa(t,e,a,s,o,i){const d=(0,n.up)("format-balance"),r=(0,n.up)("Button"),u=(0,n.up)("Modal");return(0,n.wg)(),(0,n.j4)(u,{title:"Unlocking chunks",class:"tw-text-darkGray-800 dark:tw-text-darkGray-100"},{content:(0,n.w5)((()=>[(0,n._)("div",da,[(0,n.Uk)((0,l.zw)(t.$t("dappStaking.modals.chunksModalDescription"))+" ",1),ra,(0,n.Uk)(" "+(0,l.zw)(t.$t("dappStaking.modals.maxUnlockingChunks",{chunks:t.maxUnlockingChunks})),1)]),t.unlockingChunks?((0,n.wg)(),(0,n.iD)("div",ua,[(0,n._)("div",ca,(0,l.zw)(t.$t("dappStaking.chunk")),1),(0,n._)("div",wa,(0,l.zw)(t.$t("dappStaking.amount")),1),(0,n._)("div",pa,(0,l.zw)(t.$t("dappStaking.modals.availableInEra")),1)])):(0,n.kq)("",!0),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.unlockingChunks,((e,a)=>((0,n.wg)(),(0,n.iD)("div",{key:a,class:"tw-grid tw-grid-cols-12"},[(0,n._)("div",ma,(0,l.zw)(a+1)+".",1),(0,n._)("div",ka,[(0,n.Wm)(d,{balance:e.amount},null,8,["balance"])]),(0,n._)("div",va,(0,l.zw)(e.unlockEra.toHuman())+" ("+(0,l.zw)(t.$t("dappStaking.modals.erasToGo",{era:e.erasBeforeUnlock}))+") ",1)])))),128)),(0,n._)("div",ga,[(0,n.Wm)(r,{type:"button",primary:!1,onClick:t.closeModal},{default:(0,n.w5)((()=>[(0,n.Uk)((0,l.zw)(t.$t("close")),1)])),_:1},8,["onClick"])])])),_:1})}const ha=(0,n.aZ)({components:{Modal:ot.Z,FormatBalance:At.Z,Button:c.Z},props:{unlockingChunks:{type:Object,required:!0},maxUnlockingChunks:{type:Number,required:!0}},emits:["update:is-open"],setup(t,{emit:e}){const a=()=>{e("update:is-open",!1)};return Object.assign({closeModal:a},(0,y.BK)(t))}}),ba=(0,ct.Z)(ha,[["render",fa]]),xa=ba;var Sa=a(40019),ya=function(t,e,a,n){function l(t){return t instanceof a?t:new a((function(e){e(t)}))}return new(a||(a=Promise))((function(a,s){function o(t){try{d(n.next(t))}catch(e){s(e)}}function i(t){try{d(n["throw"](t))}catch(e){s(e)}}function d(t){t.done?a(t.value):l(t.value).then(o,i)}d((n=n.apply(t,e||[])).next())}))};const Aa=(0,n.aZ)({components:{Button:c.Z,FormatBalance:At.Z,ChunksModal:xa},setup(){const{api:t}=(0,_.h_)(),e=(0,A.useStore)(),a=(0,y.Fl)((()=>e.getters["general/selectedAddress"])),l=(0,y.Fl)((()=>e.getters["dapps/getUnlockingChunks"])),s=(0,y.Fl)((()=>e.getters["dapps/getMaxUnlockingChunks"])),o=(0,y.iH)(),i=(0,y.iH)(!1),d=(0,y.iH)(new(yt())(0)),r=(0,y.iH)(!1),{canUnbondWithdraw:u}=(0,Ft.v)(t),c=(0,y.Fl)((()=>e.getters["general/substrateAccounts"])),w=()=>ya(this,void 0,void 0,(function*(){yield e.dispatch("dapps/withdrawUnbonded",{api:null===t||void 0===t?void 0:t.value,senderAddress:a.value,substrateAccounts:c.value})})),p=()=>ya(this,void 0,void 0,(function*(){var e;const a=yield null===(e=null===t||void 0===t?void 0:t.value)||void 0===e?void 0:e.query.dappsStaking.currentEra((t=>ya(this,void 0,void 0,(function*(){yield k(t)}))));return a})),m=p(),k=n=>ya(this,void 0,void 0,(function*(){var l,s;if(!u.value)return;const r=yield null===(l=null===t||void 0===t?void 0:t.value)||void 0===l?void 0:l.query.dappsStaking.ledger(a.value);if(null===r||void 0===r?void 0:r.unbondingInfo.unlockingChunks){o.value=r.unbondingInfo.unlockingChunks,e.commit("dapps/setUnlockingChunks",null===(s=o.value)||void 0===s?void 0:s.length),i.value=!1,d.value=new(yt())(0);for(const t of o.value){const e=n.sub(t.unlockEra.toBn()).toNumber();t.erasBeforeUnlock=Math.abs(e>0?0:e),e>=0&&(d.value=d.value.add(t.amount.toBn())),i.value||(i.value=0===t.erasBeforeUnlock)}}}));return(0,n.YP)((()=>l.value),(e=>ya(this,void 0,void 0,(function*(){var e;Sa.log("chunks count changed");const a=yield null===(e=null===t||void 0===t?void 0:t.value)||void 0===e?void 0:e.query.dappsStaking.currentEra();a&&(yield k(a))})))),(0,n.Ah)((()=>ya(this,void 0,void 0,(function*(){const t=yield m;t&&t()})))),{unlockingChunks:o,canWithdraw:i,withdraw:w,totalToWithdraw:d,showModal:r,maxUnlockingChunks:s,canUnbondWithdraw:u}}}),_a=(0,ct.Z)(Aa,[["render",ia],["__scopeId","data-v-d0aae59e"]]),Ca=_a,Ua={class:"tw-bg-white dark:tw-bg-darkGray-800 tw-mb-8 tw-w-72 tw-rounded-lg tw-text-white dark:tw-text-darkGray-100 tw-py-4 tw-pb-2 tw-px-4 box xl:tw-mx-2"},Ma={class:"tw-text-xl tw-font-semibold tw-mb-2"},Da={class:"tw-flex tw-flex-col tw-items-center tw-mb-1"},za={class:"tw-font-bold tw-text-2xl"},Wa={class:"tw-font-semibold tw-mb-1"},Za={class:"tw-relative"},Fa={class:"tw-absolute tw-bottom-0 tw-w-full tw-text-white tw-font-semibold"},qa={class:"tw-flex tw-justify-center"};function Ia(t,e,a,s,o,i){const d=(0,n.up)("vue3-autocounter"),r=(0,n.up)("VueJsProgress");return(0,n.wg)(),(0,n.iD)("div",Ua,[(0,n._)("div",Ma,(0,l.zw)(t.$t("dappStaking.currentEra")),1),(0,n._)("div",Da,[(0,n._)("div",za,[(0,n.Wm)(d,{ref:"counter-era",duration:2,"end-amount":t.era,autoinit:t.era>0},null,8,["end-amount","autoinit"])])]),(0,n._)("div",null,[(0,n._)("div",Wa,(0,l.zw)(t.$t("dappStaking.blocksUntilNextEra")),1),(0,n._)("div",Za,[(0,n.Wm)(r,{percentage:Number(t.progress),bg:"turquoise",delay:600,striped:!0,animation:!0},null,8,["percentage"]),(0,n._)("div",Fa,[(0,n._)("div",qa,[(0,n.Wm)(d,{ref:"counter-countdown","start-amount":t.startValue,"end-amount":t.blocksUntilNextEra,separator:",","decimal-separator":".",duration:2,autoinit:t.blocksUntilNextEra>0,onFinished:e[0]||(e[0]=e=>t.startValue=t.blocksUntilNextEra)},null,8,["start-amount","end-amount","autoinit"])])])])])])}const ja=(0,n.aZ)({components:{VueJsProgress:It.Z,"vue3-autocounter":Ee.Z},props:{progress:{type:Number,required:!0,default:0},era:{type:Number,required:!0,default:0},blocksUntilNextEra:{type:Number,required:!0,default:0}},setup(){const t=(0,y.iH)(0);return{startValue:t}}}),Ba=(0,ct.Z)(ja,[["render",Ia],["__scopeId","data-v-399bd6aa"]]),Oa=Ba;var Na=a(35640),Ha=a(80794);const Ra=(0,n.aZ)({components:{Dapp:De,IconPlus:p.Z,IconBase:w.Z,ModalRegisterDapp:m.Z,Button:c.Z,TVL:Ne,DappsCount:Qe,Requirement:aa,Withdraw:Ca,Era:Oa},setup(){const t=(0,A.useStore)(),e=(0,y.Fl)((()=>t.getters["dapps/getAllDapps"]));(0,Ha.Z)({title:"Discover dApps"});const{stakerApr:a}=(0,_.LY)(),{progress:l,blocksUntilNextEra:s,era:o}=(0,_.xt)(),{api:i}=(0,_.h_)(),{currentAccount:d}=(0,_.mA)(),{accountData:r}=(0,_.KQ)(i,d),u=(0,y.Fl)((()=>t.getters["general/isH160Formatted"])),c=(0,y.Fl)((()=>t.getters["dapps/getMaxNumberOfStakersPerContract"])),w=(0,y.Fl)((()=>{const e=t.getters["dapps/getMinimumStakingAmount"];return(0,it.X1)(e)})),p=(0,y.iH)(!1),m=(0,y.iH)(),k=(0,y.iH)();return t.dispatch("dapps/getDapps"),t.dispatch("dapps/getStakingInfo"),(0,n.m0)((()=>{u.value&&t.dispatch("general/showAlertMsg",{msg:"dApp staking only supports Substrate wallets",alertType:"error"})})),{dapps:e,selectedDapp:m,selectedDappInfo:k,showRegisterDappModal:p,maxNumberOfStakersPerContract:c,minimumStakingAmount:w,progress:l,blocksUntilNextEra:s,era:o,stakerApr:a,fasSeedling:Na.Wub,accountData:r}}});var Ga=a(24554);const $a=(0,ct.Z)(Ra,[["render",u],["__scopeId","data-v-35e45bb8"]]),Pa=$a;ye()(Ra,"components",{QIcon:Ga.Z})},17323:t=>{t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAE0UlEQVR4nKSXW6hV1RfGf3Ot5fn7724PWZFQR4uEgiwiX+yhnurFKMrktH3pwcqiiF6iyDRSosQsfCsozO6ESJBEEZVgQYEURFEZYb2IXRQlL3uvGWPub+7GnmeJZgPm2WfPNdf4xuUbY8zdUMimTZvTZwgQIxUQtUxmAVcBVwCTwNna/x3YBewEvgT+0H7QarP+Xm9qDC90gUtqYKD/rwOWAdcDF5RGF/IL8CHwMvBRh64xI0IHuLf6GuBJAXsZHAO8Lr5/ADwKfA7j0cxGhA5wdOgxrVrGRCkJx4lA1Pmg82bsai2vPxkROsCNF68At0lRq72Tkb6MsPUmcIcMGkWiceA5RG8Bi4GjwAznRVeIY2F8loFzBukyh/4H3CydKaqVDmSQDQI/IvDDwD4B51T0nReZL1F7fZ3J5/dJxwzpXCyMgTDTn8zQm4B7ZW02zAg0D7gFeF/7jd4JLkVBe43OGPluBS4GHnZOHhXGYmHWjRScCjzniJYNsDLaC7yjtQS4HPhC5bZP584A5qhHfAO85tLhSzHn/nmV6sFGG3dKQd/lzfb3y7tGz97Q6hJrQFscJ/I7+7O3jh9zhLnBPJ0A7nbe48I6GUKIrgxrl4KqWP6Zf2fS8ceT/S7Dti+LgEtdnqJj7oGJiaHhVrMxDonW603ZZ9vrTaUFsR3uxT7EwajJhFQcB0RACicNc5H1gWeB+12YchrWAw9mkpY9/Hii/pIJ/jTwkNOdsVIKFrq85TCbxRvd3slKLtWNKsfa7ZksrJQjb0DQZNsVwiiXJyutcaht25+BHwoMk8lKI5bCWxunMcZhEv9t+It3Ql3XpvdPffcGzKqKPp8fzBwSKP6X8A/RYqRtUxBndjxuKuWmlNkxxv9no4p7wgmJ3gkQLI4GPjvrc8cOV+p0uBKxz3PVRkPHyD5RcIFFM2IucH6BYbLXvnznDMANiqWuKkrFJwKOY/3txVTNWN9a/j/Wlcvn25rQPcCLYu9EnnSlEcaSMP2Kkrl1RFV2n5uS3oBP7OBWd3GIenGGBow9u0SKRq00Axp4QVPfyo8oje8CZ/6TktE5w9xa9fuH7Ca7wynZ6obKfOAzjeW5rscfS/Kzee4uOF/72bichh0hsLOqa3M2td1s3UGN3RuBQ8BZwBPAVzJmbdumKKVKraqRZ7b3lKbi13pnVgGOi8R6i14VQl3FGLcoCkHkM6D31L+zYafolrynqlL4alOwe3d6lmeI3RGu1NVrUAwf3AzYEWOKcrI/VFVlB5crb9YXFgAPqIc/Avykcv0UeCnGZFQK5dKlY6F/G/jL5dnTM7PFMJarzYdUGjHGWmFbIev7moTnAGv6/b7l/0Lg2tyms8Lt26cpP9RxSY3O+xXCSpMyhUdz3nL4ArBS/8/RtWlJ0zTn6YWLVJJJli2bGvV83/s7iJmv9iuF0QhzbA7kWb1aRHwGuAx4XZeKo0NP4nwIe8pRvXnzq7Rt7PI6Yxif1rmr2jBP6ddJGDOi1sEbgO+1f5oY3STyd3Qe7QVXqrkZ/Shd6xxZE6ZhV0wbtzHnahtwNfC42J0NOZ6cLvBfgVW6KW8bVk2c9gO1KjeUwoH7YbFKpWUhXAv8ZheFonXHwaC1wWMEXaOzC2R8/mEzyJHzDv8dAAD//yQIvFdmJw8/AAAAAElFTkSuQmCC"}}]);